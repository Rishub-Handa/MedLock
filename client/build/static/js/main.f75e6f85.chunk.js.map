{"version":3,"sources":["icons/003-info.svg","components/nav/history.js","components/dashboard/DashIcon.js","actions/types.js","config/servers.js","auth/Auth.js","actions/profileActions.js","components/dashboard/DispenserCode.js","components/profile/PersonalInfo.js","components/profile/ProfileModule.js","components/profile/Profile.js","components/resources/Resources.js","components/inbox/Inbox.js","actions/authActions.js","auth/AuthManagement.js","components/SecuredRoute.js","components/dashboard/UserInfo.js","components/dashboard/AddDispenser.js","components/dashboard/DashHeader.js","components/nav/ModuleInfo.js","components/patientView/PersonalDataView.js","components/nav/sidebar/SideBarItem.js","components/nav/sidebar/ModuleLink.js","components/nav/sidebar/SideBar.js","actions/surveyActions.js","actions/dispenserActions.js","components/graphs/PDISurveyBar.js","components/graphs/DateTimeScatter.js","components/patientData/DataView.js","components/patientData/PatientData.js","components/survey/PDISurvey.js","components/test/Dispenser.js","components/test/ServerEndpoints.js","components/myPatients/PatientListItem.js","components/myPatients/AddPatientForm.js","components/myPatients/PatientList.js","actions/patientActions.js","components/patientView/PatientView.js","components/users/UserListItem.js","components/users/UserList.js","components/myPatients/MyPatients.js","components/dashboard/NewUser.js","components/dashboard/Dashboard.js","actions/sideBarActions.js","components/Callback.js","components/home/Home.js","components/login/Login.js","actions/providerActions.js","components/administration/sections/patients/PatientSection.js","components/administration/sections/providers/ProviderSection.js","components/administration/Admin.js","App.js","serviceWorker.js","reducers/profileReducer.js","reducers/surveyReducer.js","reducers/dispenseReducer.js","reducers/authReducer.js","reducers/providerReducer.js","reducers/patientReducer.js","reducers/sideBarReducer.js","reducers/rootReducer.js","store.js","index.js","icons/round-menu-24px.svg","icons/white-logo.png","icons/round-timeline-24px.svg","components/profile/profile_pic.jpg","components/profile/edit-profile.png","components/dashboard/profile_pic.jpg","icons/round-email-24px.svg","icons/round-folder-24px.svg","icons/round-home-24px.svg","icons/round-person-24px.svg","icons/round-people-24px.svg"],"names":["module","exports","createBrowserHistory","DashIcon","route","e","history","replace","props","link","className","onClick","this","style","cursor","name","src","content","image","roles","description","Component","COLLAPSE_SIDEBAR","EXPAND_SIDEBAR","SET_SIDEBAR_TOGGLE","MEDLOCK_API","MEDLOCK_URL","MEDLOCK_AUDIENCE","auth0client","requestedScopes","auth0","WebAuth","domain","clientID","redirectUri","responseType","audience","scope","login","bind","logout","handleAuthentication","isAuthenticated","getAccessToken","getIdToken","renewSession","getProfile","console","log","authorize","parseHash","err","authResult","accessToken","idToken","setSession","alert","error","localStorage","setItem","expiresAt","expiresIn","Date","getTime","userProfile","idTokenPayload","scopes","checkSession","error_description","removeItem","returnTo","window","location","origin","Promise","resolve","reject","grantedScopes","split","every","includes","loadProfileBegin","type","loadProfileSuccess","profile","payload","loadProfileFailure","saveProfileBegin","saveProfileSuccess","updatedPersonalData","saveProfileFailure","saveProfile","role","API_URL","headers","dispatch","axios","put","then","res","data","catch","addProfileModuleBegin","addProfileModuleSuccess","newProfileModule","addProfileModuleFailure","addDispenserCodeBegin","addDispenserCodeSuccess","code","addDispenserCodeFailure","DispenserCode","state","isLoading","codeString","numArray","i","Math","floor","random","forEach","num","addDispenserCode","codeAdding","codeAddedError","setState","hideDispenserCode","String","connect","profileState","post","PersonalInfo","patientFormHTML","Form","FormGroup","Label","for","Input","id","placeholder","value","personalData","onChange","sex","birthday","address","street","city","zip","email","phone","chatname","bio","Button","onProfileSave","providerFormHTML","editableHTML","patientProfileInfo","class","align","variant","onProfileEdit","editPic","width","height","profilePic","providerProfileInfo","staticHTML","target","editable","ProfileModule","onSave","addProfileModule","loading","Profile","editProfile","profileModulesHTML","profileModules","concat","apply","map","profileModule","profileSaving","message","profileLoading","loadingProfile","authState","Resources","Inbox","fetchRolesBegin","fetchRolesSuccess","fetchRolesFailure","auth0RegistrationBegin","auth0RegistrationSuccess","auth0RegistrationFailure","auth0Registration","newUser","API_MANAGEMENT_TOKEN","authorization","assignRolesBegin","assignRolesSuccess","assignRolesFailure","assignRoles","user_id","req_body","fetchAMT","AMTHeader","withRouter","component","rest","render","to","pathname","from","UserInfo","alt","AddDispenser","displayCodeCallback","DashHeader","collapsedSideBarJSX","toggleSideBar","menuIcon","displayDispenserCode","expandedSideBarToggleJSX","expandedSideBarNoToggleJSX","modules","icon","DashboardIcon","InboxIcon","MyDataIcon","ResourcesIcon","MyPatientsIcon","ProfileIcon","PersonalDataView","ModuleLink","push","SideBar","containsRole","requiredRole","retval","filterModules","newModules","filter","sideBarItemsHTML","expandedSideBar","togglable","bigLogo","collapsedMenuIcon","toggle","collapsedSideBar","collapsed","require","submitSurveyBegin","submitSurveySuccess","survey","submitSurveyFailure","fetchPDISurveysBegin","fetchPDISurveysSuccess","surveys","fetchPDISurveysFailure","fetchDispenserBegin","fetchDispenserSuccess","dispenser","fetchDispenserFailure","fetchDispenser","get","PDISurveyBar","onSelectChange","surveyIndex","redrawChart","size","getSize","d3","remove","drawChart","updateChart","svg","chart","config","parseData","selectAll","y","attr","d","yScale","canvasHeight","select","text","formatTimestamp","date","timestamp","getMonth","getDate","getFullYear","length","resizedFn","addEventListener","clearTimeout","setTimeout","refs","canvas","parentElement","offsetWidth","offsetHeight","curWidth","curHeight","newWidth","getWidth","newHeight","getHeight","dates","selected","prevProps","prevState","x","responses","pair","Number","canvasWidth","append","range","call","xScale","padding","scale","tickSize","tickFormat","margin","enter","bandwidth","ref","surveySelect","DateTimeScatter","tooltipMouseover","tooltip","html","formatTime","pageX","pageY","transition","duration","tooltipMouseout","formatDate","hours","minutes","addZero","val","dateRange","first","last","cur","setDate","set","getHours","getMinutes","getSeconds","flatData","xy","flattenData","yAxis","ticks","tickValues","sort","getDateRange","xDomain","title","colors","on","mouseover","DataView","graphs","graph_id","pdisurveys","dispenses","btn1","btn2","btn3","displayGraphs","PatientData","retrievedData","fetchPDISurveys","patient","medicalData","dispenser_id","allPDISurveys","surveysLoading","surveysLoaded","surveyError","dispenserLoading","dispenserLoaded","dispenserError","events","surveyState","dispenseState","PDISurvey","newResponses","question","answer","onSubmit","preventDefault","submitSurvey","surveyResponse","marginBottom","marginLeft","questions","subject","marginTop","Dispenser","dispenseTime","setFullYear","parseInt","substring","setMonth","setUTCHours","time","setMinutes","toString","dispenseSeconds","ServerEndpoints","testEndpoint","PatientListItem","viewPatient","deletePatient","_id","AddPatient","createPatientProfileBegin","createPatientProfileSuccess","createPatientProfileFailure","addPatientBegin","addPatientSuccess","allPatients","addPatientFailure","removePatientBegin","removePatientSuccess","removePatientFailure","fetchPatientsBegin","fetchPatientsSuccess","patients","fetchPatientsError","deletePatientBegin","deletePatientSuccess","deletePatientError","fetchAllPatientsBegin","fetchAllPatientsSuccess","fetchAllPatientsFailure","PatientView","pdiSurveys","UserListItem","dropdownOpen","user","viewUser","deleteUser","UserList","userHTML","users","displayedUsers","onSearchChange","searchResults","createNew","deleteAll","MyPatients","onePatientView","viewedPatient","onRemovePatient","patientId","removePatient","addPatient","newPatientForm","displayNewPatientForm","submitForm","password","slice","newPatient","AMT","access_token","createPatient","errorString","getUserByEmail","newPatientProfile","providers","sub","createPatientProfile","fetchPatients","patient_id","url","displayedPatients","patientRegistering","registerError","patientsFetching","patientsFetched","patientState","patientLoading","providerState","roleAssigning","roleAssignError","userProfileLoading","userProfileError","patientRemoving","lastRemovedPatient","patientRemoveError","newProfile","addPatientToProviderList","delete","providerId","NewUser","body","resetPassword","required","AMTLoading","AMTError","Dashboard","toggleCodeDisplay","autoCollapseSideBar","query","setSideBarToggle","matches","collapseSideBar","expandSideBar","sideBarCollapsed","toggleNewUser","dashboardContentStyle","iconHTML","icons","dashboardHTML","makeMainRoutes","path","matchMedia","addListener","fetchRoles","loadProfile","profileError","rolesLoading","rolesError","sideBarToggle","profileLoaded","sideBarState","Callback","Home","Login","Helmet","createProviderProfileBegin","createProviderProfileSuccess","provider","createProviderProfileFailure","fetchAllProvidersBegin","fetchAllProvidersSuccess","fetchAllProvidersFailure","deleteProviderBegin","deleteProviderSuccess","FETCH_ALL_PROVIDERS_BEGIN","deleteProviderFailure","PatientSection","deleteAllPatients","createNewPatient","ProviderSection","viewProvider","createNewProviderForm","newProviderFormVisible","createNewProvider","newProviderName","newProviderEmail","deleteProvider","deleteAllProviders","Admin","newProvider","createProviderProfile","ids","fetchAllPatients","fetchAllProviders","providersFetching","fetchProvidersError","providersFetched","providerError","deletedProviders","deletedPatients","creatorScope","exact","nextState","test","hash","App","Boolean","hostname","match","initialState","profileCreated","profileCreating","profileCreateError","addingNewProfileModule","providerLoading","providerDeleting","patientDeleting","createPatientError","newAddedPatient","addPatientLoading","addPatientError","combineReducers","action","middleware","thunk","reduxPromise","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f75e6f85.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/003-info.6da33994.svg\";","import { createBrowserHistory } from 'history';\r\nexport default createBrowserHistory();\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport history from '../nav/history';\r\nimport '../../css/DashIcon.css';\r\n\r\n/**\r\n * Class Component for displaying info about the \r\n * module it represents. When clicked, the correspoding\r\n * module is loaded. \r\n */\r\nclass DashIcon extends Component {\r\n    \r\n    /**\r\n     * Function that reroutes to corresponding page. Called \r\n     * when the DashIcon is clicked.\r\n     */\r\n    route = (e) => {\r\n        history.replace(this.props.link);\r\n    };\r\n    \r\n    render() {\r\n        return (\r\n            /* <div className={`${this.props.id}-dashIcon`} onClick={this.route}> */\r\n            <div className=\"DashIcon\" onClick={this.route} style={{cursor:'pointer'}}>\r\n                <div>\r\n                    <p>{this.props.name}</p>\r\n                </div>\r\n                <div>\r\n                    <img src={this.props.content.image} />\r\n                    <p>{this.props.roles.description}</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nDashIcon.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    id: PropTypes.string.isRequired,\r\n    content: PropTypes.object.isRequired, \r\n    roles: PropTypes.array.isRequired, \r\n    link: PropTypes.string.isRequired\r\n}\r\n\r\nexport default DashIcon;\r\n","export const CREATE_PATIENT_PROFILE_BEGIN = 'CREATE_PROFILE_BEGIN';\r\nexport const CREATE_PATIENT_PROFILE_SUCCESS = 'CREATE_PROFILE_SUCCESS';\r\nexport const CREATE_PATIENT_PROFILE_FAILURE = 'CREATE_PROFILE_FAILURE';\r\n\r\nexport const CREATE_PROVIDER_PROFILE_BEGIN = 'CREATE_PROVIDER_PROFILE_BEGIN';\r\nexport const CREATE_PROVIDER_PROFILE_SUCCESS = 'CREATE_PROVIDER_PROFILE_SUCCESS';\r\nexport const CREATE_PROVIDER_PROFILE_FAILURE = 'CREATE_PROVIDER_PROFILE_FAILURE';\r\n\r\nexport const LOAD_PROFILE_BEGIN = 'LOAD_PROFILE_BEGIN';\r\nexport const LOAD_PROFILE_SUCCESS = 'LOAD_PROFILE_SUCCESS';\r\nexport const LOAD_PROFILE_FAILURE = 'LOAD_PROFILE_FAILURE';\r\n\r\nexport const SAVE_PROFILE_BEGIN = 'SAVE_PROFILE_BEGIN';\r\nexport const SAVE_PROFILE_SUCCESS = 'SAVE_PROFILE_SUCCESS';\r\nexport const SAVE_PROFILE_FAILURE = 'SAVE_PROFILE_FAILURE';\r\n\r\nexport const EDIT_PROFILE = 'EDIT_PROFILE';\r\n\r\nexport const SUBMIT_SURVEY_BEGIN = 'SUBMIT_SURVEY_BEGIN';\r\nexport const SUBMIT_SURVEY_SUCCESS = 'SUBMIT_SURVEY_SUCCESS';\r\nexport const SUBMIT_SURVEY_FAILURE = 'SUBMIT_SURVEY_FAILURE';\r\n\r\nexport const FETCH_PDISURVEYS_BEGIN = 'FETCH_PDISURVEYS_BEGIN'; \r\nexport const FETCH_PDISURVEYS_SUCCESS = 'FETCH_PDISURVEYS_SUCCESS'; \r\nexport const FETCH_PDISURVEYS_FAILURE = 'FETCH_PDISURVEYS_FAILURE';\r\n\r\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\r\n\r\nexport const FETCH_DISPENSER_BEGIN = 'FETCH_DISPENSER_BEGIN'; \r\nexport const FETCH_DISPENSER_SUCCESS = 'FETCH_DISPENSER_SUCCESS'; \r\nexport const FETCH_DISPENSER_FAILURE = 'FETCH_DISPENSER_FAILURE'; \r\n\r\nexport const ADD_PROFILE_MODULE_BEGIN = 'ADD_PROFILE_MODULE_BEGIN';\r\nexport const ADD_PROFILE_MODULE_SUCCESS = 'ADD_PROFILE_MODULE_SUCCESS';\r\nexport const ADD_PROFILE_MODULE_FAILURE = 'ADD_PROFILE_MODULE_FAILURE';\r\n\r\nexport const FETCH_PATIENTS_BEGIN = 'FETCH_ALL_PATIENTS_BEGIN'; \r\nexport const FETCH_PATIENTS_SUCCESS = 'FETCH_ALL_PATIENTS_SUCCESS'; \r\nexport const FETCH_PATIENTS_FAILURE = 'FETCH_ALL_PATIENTS_FAILURE'; \r\n\r\nexport const FETCH_ROLES_BEGIN = 'FETCH_ROLES_BEGIN'; \r\nexport const FETCH_ROLES_SUCCESS = 'FETCH_ROLES_SUCCESS'; \r\nexport const FETCH_ROLES_FAILURE = 'FETCH_ROLES_FAILURE'; \r\n\r\nexport const ADD_PATIENT_BEGIN = 'ADD_PATIENT_BEGIN';\r\nexport const ADD_PATIENT_SUCCESS = 'ADD_PATIENT_SUCCESS';\r\nexport const ADD_PATIENT_FAILURE = 'ADD_PATIENT_FAILURE'; \r\n\r\nexport const REMOVE_PATIENT_BEGIN = 'REMOVE_PATIENT_BEGIN';\r\nexport const REMOVE_PATIENT_SUCCESS = 'REMOVE_PATIENT_SUCCESS';\r\nexport const REMOVE_PATIENT_FAILURE = 'REMOVE_PATIENT_FAILURE';\r\n\r\nexport const AUTH0_REGISTRATION_BEGIN = 'AUTH0_REGISTRATION_BEGIN'; \r\nexport const AUTH0_REGISTRATION_SUCCESS = 'AUTH0_REGISTRATION_SUCCESS'; \r\nexport const AUTH0_REGISTRATION_FAILURE = 'AUTH0_REGISTRATION_FAILURE'; \r\n\r\nexport const ASSIGN_ROLES_BEGIN = 'ASSIGN_ROLES_BEGIN';\r\nexport const ASSIGN_ROLES_SUCCESS = 'ASSIGN_ROLES_SUCCESS';\r\nexport const ASSIGN_ROLES_FAILURE = 'ASSIGN_ROLES_FAILURE';\r\n\r\nexport const DELETE_PATIENT_BEGIN = 'DELETE_PATIENT_BEGIN';\r\nexport const DELETE_PATIENT_SUCCESS = 'DELETE_PATIENT_BEGIN';\r\nexport const DELETE_PATIENT_FAILURE = 'DELETE_PATIENT_FAILURE';\r\n\r\nexport const FETCH_ALL_PATIENTS_BEGIN = 'FETCH_ALL_PATIENTS_BEGIN';\r\nexport const FETCH_ALL_PATIENTS_SUCCESS = 'FETCH_ALL_PATIENTS_SUCCESS';\r\nexport const FETCH_ALL_PATIENTS_FAILURE = 'FETCH_ALL_PATIENTS_FAILURE';\r\n\r\nexport const FETCH_ALL_PROVIDERS_BEGIN = 'FETCH_ALL_PROVIDERS_BEGIN';\r\nexport const FETCH_ALL_PROVIDERS_SUCCESS = 'FETCH_ALL_PROVIDERS_SUCCESS';\r\nexport const FETCH_ALL_PROVIDERS_FAILURE = 'FETCH_ALL_PROVIDERS_FAILURE';\r\n\r\nexport const DELETE_PROVIDER_BEGIN = 'DELETE_PROVIDER_BEGIN';\r\nexport const DELETE_PROVIDER_SUCCESS = 'DELETE_PROVIDER_SUCCESS';\r\nexport const DELETE_PROVIDER_FAILURE = 'DELETE_PROVIDER_FAILURE';\r\n\r\nexport const COLLAPSE_SIDEBAR = 'COLLAPSE_SIDEBAR';\r\nexport const EXPAND_SIDEBAR = 'EXPAND_SIDEBAR';\r\nexport const SET_SIDEBAR_TOGGLE = 'SET_SIDEBAR_TOGGLE'; \r\n\r\nexport const ADD_DISPENSER_CODE_BEGIN = 'ADD_DISPNESER_CODE_BEGIN'; \r\nexport const ADD_DISPENSER_CODE_SUCCESS = 'ADD_DISPNESER_CODE_SUCCESS'; \r\nexport const ADD_DISPENSER_CODE_FAILURE = 'ADD_DISPNESER_CODE_FAILURE'; \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","// PRODUCTION:\r\n// export const MEDLOCK_API = 'https://aqueous-falls-74814.herokuapp.com/api';\r\n// export const MEDLOCK_AUTH0 = 'https://medlock-dev.auth0.com/api';\r\n// export const MEDLOCK_URL = 'https://aqueous-falls-74814.herokuapp.com';\r\n// export const MEDLOCK_AUDIENCE = 'https://aqueous-falls-74814.herokuapp.com/api';\r\n\r\n\r\n// DEVELOPMENT:\r\nexport const MEDLOCK_API = 'http://localhost:5000/api';\r\nexport const MEDLOCK_AUTH0 = 'https://medlock-dev.auth0.com/api';\r\nexport const MEDLOCK_URL = 'http://localhost:5000';\r\nexport const MEDLOCK_AUDIENCE = 'http://localhost:5000';\r\n\r\n// remove this file, set up proper configuration stuff","import auth0 from 'auth0-js';\r\nimport history from '../components/nav/history';\r\nimport { MEDLOCK_API, MEDLOCK_URL, MEDLOCK_AUDIENCE } from '../config/servers';\r\n\r\nclass Auth {\r\n    accessToken;\r\n    idToken;\r\n    expiresAt;\r\n    userProfile;\r\n    scopes;\r\n\r\n    requestedScopes = 'openid profile read:patients';\r\n\r\n    // Note: the audience key represents the default key used to request API access.\r\n    // it should match the API identifier in auth0 and the audience in checkJWT\r\n    auth0 = new auth0.WebAuth({\r\n        domain: 'medlock-dev.auth0.com',\r\n        clientID: '1CF1ZJqKO4RVUdkyku4LAWN78tAPhN7l',\r\n        redirectUri: `${MEDLOCK_URL}/callback`,\r\n        responseType: 'token id_token',\r\n        audience: MEDLOCK_AUDIENCE,\r\n        scope: this.requestedScopes\r\n    });\r\n\r\n    constructor() {\r\n        this.login = this.login.bind(this);\r\n        this.logout = this.logout.bind(this);\r\n        this.handleAuthentication = this.handleAuthentication.bind(this);\r\n        this.isAuthenticated = this.isAuthenticated.bind(this);\r\n        this.getAccessToken = this.getAccessToken.bind(this);\r\n        this.getIdToken = this.getIdToken.bind(this);\r\n        this.renewSession = this.renewSession.bind(this);\r\n        this.getProfile = this.getProfile.bind(this);\r\n    }\r\n\r\n    login() {\r\n        console.log(auth0);\r\n        console.log('Login');\r\n        this.auth0.authorize();\r\n    }\r\n\r\n    handleAuthentication() {\r\n        console.log('Handle Authentication');\r\n        console.log(this.auth0);\r\n        this.auth0.parseHash((err, authResult) => {\r\n            console.log(authResult);\r\n            if (authResult && authResult.accessToken && authResult.idToken) {\r\n                this.setSession(authResult);\r\n            } else if (err) {\r\n                history.replace('/'); //change to main info page\r\n                console.log(err);\r\n                alert(`Error: ${err.error}. Check the console for further details.`);\r\n            }\r\n        });\r\n    }\r\n\r\n    getAccessToken() {\r\n        return this.accessToken;\r\n    }\r\n\r\n    getIdToken() {\r\n        return this.idToken;\r\n    }\r\n\r\n    setSession(authResult) {\r\n        // Set isLoggedIn flag in localStorage\r\n        localStorage.setItem('isLoggedIn', 'true');\r\n\r\n        // Set the time that the Access Token will expire at\r\n        let expiresAt = (authResult.expiresIn * 1000) + new Date().getTime();\r\n        this.accessToken = authResult.accessToken;\r\n        this.idToken = authResult.idToken;\r\n        this.expiresAt = expiresAt;\r\n        this.userProfile = authResult.idTokenPayload;\r\n        this.scopes = authResult.scope || this.requestedScopes || '';\r\n\r\n        // navigate to the profile page\r\n        history.replace('/dashboard');\r\n    }\r\n\r\n    renewSession() {\r\n        this.auth0.checkSession({}, (err, authResult) => {\r\n            if (authResult && authResult.accessToken && authResult.idToken) {\r\n                this.setSession(authResult);\r\n            } else if (err) {\r\n                this.logout();\r\n                console.log(err);\r\n                alert(`Could not get a new token (${err.error}: ${err.error_description}).`);\r\n            }\r\n        });\r\n    }\r\n\r\n    getProfile() {\r\n        return this.userProfile;\r\n    }\r\n\r\n    logout() {\r\n        // Remove tokens and expiry time\r\n        this.accessToken = null;\r\n        this.idToken = null;\r\n        this.expiresAt = 0;\r\n\r\n        // Remove user profile\r\n        this.userProfile = null;\r\n\r\n        // Remove isLoggedIn flag from localStorage\r\n        localStorage.removeItem('isLoggedIn');\r\n\r\n        this.auth0.logout({\r\n            returnTo: window.location.origin\r\n        });\r\n\r\n        // navigate to the home route\r\n        history.replace('/');\r\n    }\r\n\r\n    isAuthenticated() {\r\n        console.log(\"isAuthenticated\");\r\n        // Check whether the current time is past \r\n        // the access token's expxiry time\r\n        let expiresAt = this.expiresAt;\r\n        console.log(expiresAt);\r\n        console.log(new Date().getTime());\r\n        return new Date().getTime() < expiresAt;\r\n    }\r\n\r\n    silentAuth() {\r\n        return new Promise((resolve, reject) => {\r\n            this.auth0.checkSession({}, (err, authResult) => {\r\n                if (err) {\r\n                    return reject(err);\r\n                }\r\n                this.setSession(authResult);\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    \r\n    userHasScopes(scopes) {\r\n        const grantedScopes = this.scopes.split(' ');\r\n        return scopes.every(scope => grantedScopes.includes(scope));\r\n    }\r\n\r\n}\r\n\r\n\r\nconst auth0client = new Auth();\r\n\r\nexport default auth0client;","import { \r\n    LOAD_PROFILE_BEGIN,\r\n    LOAD_PROFILE_SUCCESS,\r\n    LOAD_PROFILE_FAILURE,\r\n    SAVE_PROFILE_BEGIN,\r\n    SAVE_PROFILE_SUCCESS, \r\n    SAVE_PROFILE_FAILURE, \r\n    EDIT_PROFILE, \r\n    ADD_PROFILE_MODULE_BEGIN,\r\n    ADD_PROFILE_MODULE_SUCCESS,\r\n    ADD_PROFILE_MODULE_FAILURE,\r\n    ADD_DISPENSER_CODE_BEGIN, \r\n    ADD_DISPENSER_CODE_SUCCESS, \r\n    ADD_DISPENSER_CODE_FAILURE \r\n} from './types';\r\n\r\nimport axios from 'axios';\r\nimport auth0client from '../auth/Auth';\r\nimport { MEDLOCK_API } from '../config/servers';\r\n\r\nconst loadProfileBegin = () => ({\r\n    type: LOAD_PROFILE_BEGIN\r\n});\r\n\r\nconst loadProfileSuccess = profile => ({\r\n    type: LOAD_PROFILE_SUCCESS,\r\n    payload: {\r\n        profile\r\n    } \r\n});\r\n\r\nconst loadProfileFailure = error => ({\r\n    type: LOAD_PROFILE_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\nexport function loadProfile(role) {\r\n    const { getAccessToken } = auth0client;\r\n    let API_URL = MEDLOCK_API;\r\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n\r\n    switch (role) {\r\n        case \"Patient\": \r\n            API_URL += \"/patient/patient\"; \r\n            break; \r\n        case \"Provider\": \r\n            API_URL += \"/provider\"; \r\n            break; \r\n    }\r\n\r\n    return dispatch => {\r\n        dispatch(loadProfileBegin());\r\n        return axios.get(API_URL, { headers })\r\n            .then(res => {\r\n                dispatch(loadProfileSuccess(res.data)); \r\n            })\r\n            .catch(error => dispatch(loadProfileFailure(error)));\r\n    }\r\n}\r\n\r\nconst saveProfileBegin = () => ({\r\n    type: SAVE_PROFILE_BEGIN\r\n});\r\n\r\nconst saveProfileSuccess = updatedPersonalData => ({\r\n    type: SAVE_PROFILE_SUCCESS,\r\n    payload: {\r\n        updatedPersonalData\r\n    }\r\n});\r\n\r\nconst saveProfileFailure = error => ({\r\n    type: SAVE_PROFILE_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\nexport function saveProfile(updatedPersonalData, role) {\r\n    const { getAccessToken } = auth0client;\r\n    let API_URL = MEDLOCK_API;\r\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n\r\n    switch (role) {\r\n        case \"Patient\": \r\n            API_URL += \"/patient/patient\"; \r\n            break; \r\n        case \"Provider\": \r\n            API_URL += \"/provider\"; \r\n            break; \r\n    }\r\n\r\n    return dispatch => {\r\n        dispatch(saveProfileBegin());\r\n        return axios.put(`${API_URL}`, updatedPersonalData, { headers })\r\n            .then(res => {\r\n                console.log(res.data);\r\n                dispatch(saveProfileSuccess(res.data));\r\n            })\r\n            .catch(error => dispatch(saveProfileFailure(error)));\r\n    }\r\n};\r\n\r\nexport const editProfile = () => dispatch => {\r\n    const action = {\r\n        type: EDIT_PROFILE\r\n    }\r\n    dispatch(action);\r\n};\r\n\r\nconst addProfileModuleBegin = () => ({\r\n    type: ADD_PROFILE_MODULE_BEGIN\r\n});\r\n\r\nconst addProfileModuleSuccess = newProfileModule => ({\r\n    type: ADD_PROFILE_MODULE_SUCCESS,\r\n    payload: {\r\n        newProfileModule\r\n    }\r\n});\r\n\r\nconst addProfileModuleFailure = error => ({\r\n    type: ADD_PROFILE_MODULE_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\nexport function addProfileModule(newProfileModule) {\r\n    const { getAccessToken } = auth0client;\r\n    const API_URL = `${MEDLOCK_API}/patient`;\r\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n\r\n    return dispatch => {\r\n        dispatch(addProfileModuleBegin());\r\n        return axios.post(`${API_URL}/patient/modules`, newProfileModule, { headers })\r\n            .then(res => dispatch(addProfileModuleSuccess(res.data)))\r\n            .catch(error => dispatch(addProfileModuleFailure(error)));\r\n    }\r\n} \r\n\r\n\r\nconst addDispenserCodeBegin = () => ({\r\n    type: ADD_DISPENSER_CODE_BEGIN\r\n});\r\n\r\nconst addDispenserCodeSuccess = code => ({\r\n    type: ADD_DISPENSER_CODE_SUCCESS,\r\n    payload: {\r\n        code\r\n    }\r\n});\r\n\r\nconst addDispenserCodeFailure = error => ({\r\n    type: ADD_DISPENSER_CODE_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n}); \r\n\r\nexport function addDispenserCode(code) {\r\n    const { getAccessToken } = auth0client;\r\n    const API_URL = `${MEDLOCK_API}/patient`;\r\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n    console.log(\"Code: \" + code); \r\n    return dispatch => {\r\n        dispatch(addDispenserCodeBegin());\r\n        // Make this endpoint\r\n        return axios.post(`${API_URL}/patient/code`, code, { headers })\r\n            .then(res => dispatch(addDispenserCodeSuccess(res.data)))\r\n            .catch(error => dispatch(addDispenserCodeFailure(error)));\r\n    } \r\n} \r\n","import React, { Component } from 'react'; \r\nimport '../../css/Dashboard.css'\r\nimport PropTypes from 'prop-types'; \r\nimport { connect } from 'react-redux'; \r\nimport { addDispenserCode } from '../../actions/profileActions'; \r\n\r\nclass DispenserCode extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            isLoading: true, \r\n            code: [], \r\n            codeString: \"\"\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        let numArray = []; \r\n        const arraySize = 6; \r\n\r\n        for(let i = 0; i < arraySize; i++) {\r\n            numArray[i] = Math.floor((Math.random() * 3)); \r\n        }\r\n\r\n        let codeString = \"\"; \r\n        numArray.forEach(num => {\r\n            switch(num) {\r\n                case 0:     \r\n                    codeString += \"Green \"\r\n                    break; \r\n                case 1: \r\n                    codeString += \"Yellow \"\r\n                    break; \r\n                case 2: \r\n                    codeString += \"Red \"\r\n                    break; \r\n                default:  \r\n                    break; \r\n            }\r\n        })\r\n\r\n        this.props.addDispenserCode(numArray) \r\n            .then(() => { \r\n                console.log(\"Returned Code Adding. \"); \r\n                console.log(this.props.code); \r\n                console.log(this.props.codeAdding); \r\n                console.log(this.props.codeAddedError); \r\n                if(this.props.code) {\r\n                    this.setState({\r\n                        code: numArray, \r\n                        codeString \r\n                    })\r\n                }\r\n            }); \r\n\r\n        \r\n\r\n        console.log(numArray); \r\n\r\n        // Generate Random Code \r\n        // Update Database \r\n        // Display Code \r\n    }\r\n\r\n    render() {\r\n\r\n        console.log(this.props.code); \r\n        console.log(this.props.codeAdding); \r\n        console.log(this.props.codeAddedError); \r\n\r\n        if(this.props.codeAdding) {\r\n            return (\r\n                <div className=\"DispenserCode\">\r\n                    Loading . . . \r\n                    <button onClick={this.props.hideDispenserCode}>Done</button>\r\n\r\n                </div>\r\n            ); \r\n        } \r\n\r\n        if(this.props.codeAddedError) {\r\n            return (\r\n                <div className=\"DispenserCode\">\r\n                    Error: {String(this.props.codeAddedError)}\r\n                    <button onClick={this.props.hideDispenserCode}>Done</button>\r\n\r\n                </div>\r\n            ); \r\n        }\r\n\r\n        return (\r\n            <div className=\"DispenserCode\">\r\n                Dispenser Code: <i>{this.state.codeString} </i>\r\n                <button onClick={this.props.hideDispenserCode}>Done</button>\r\n            </div>\r\n        ); \r\n        \r\n    }\r\n}\r\n\r\nDispenserCode.propTypes = {\r\n    hideDispenserCode: PropTypes.func.isRequired, \r\n    addDispenserCode: PropTypes.func.isRequired, \r\n    profile: PropTypes.object.isRequired, \r\n    code: PropTypes.array.isRequired,\r\n    codeAdding: PropTypes.bool.isRequired,\r\n    codeAddedError: PropTypes.string,\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    code: state.profileState.code,\r\n    codeAdding: state.profileState.codeAdding,\r\n    codeAddedError: state.profileState.codeAddedError,\r\n});\r\n\r\nexport default connect(mapStateToProps, { \r\n    addDispenserCode\r\n})(DispenserCode); ","import React, { Component } from 'react';\r\nimport { Button, Form, FormGroup, Input, Label } from 'reactstrap';\r\nimport '../../css/Profile.css';\r\nimport profilePic from './profile_pic.jpg';\r\nimport editPic from './edit-profile.png';\r\n/**\r\n * Component to display personal info on the profile page.\r\n */\r\n\r\nclass PersonalInfo extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            personalData: props.personalData,\r\n        };\r\n    }\r\n\r\n    patientFormHTML = () => {\r\n        return (\r\n            <div className=\"personalInfo-editable\">\r\n                <Form>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-name\">Full Name</Label>\r\n                        <Input type=\"text\" name=\"name\" id=\"pi-name\" placeholder=\"Jon Snow\" value={this.state.personalData.name} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-sex\">Sex</Label>\r\n                        <Input type=\"select\" name=\"sex\" id=\"pi-sex\" value={this.state.personalData.sex} onChange={this.onChange}>\r\n                            <option>Male</option>\r\n                            <option>Female</option>\r\n                            <option>Other</option>\r\n                        </Input>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-dob\">Birthday</Label>\r\n                        <Input type=\"date\" name=\"birthday\" id=\"pi-dob\" value={this.state.personalData.birthday} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-addr\">Address</Label>\r\n                        <Input type=\"text\" name=\"address.street\" id=\"pi-addr\" placeholder=\"123 Direwolf Ave\" value={this.state.personalData.address.street} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-city\">City</Label>\r\n                        <Input type=\"text\" name=\"city\" id=\"pi-city\" placeholder=\"Winterfell\" value={this.state.personalData.address.city} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-state\">State</Label>\r\n                        <Input type=\"text\" name=\"state\" id=\"pi-state\" placeholder=\"The North\" value={this.state.personalData.address.state} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-zip\">Zip</Label>\r\n                        <Input type=\"text\" name=\"zip\" id=\"pi-zip\" placeholder=\"12345\" value={this.state.personalData.address.zip} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-email\">Email</Label>\r\n                        <Input type=\"email\" name=\"email\" id=\"pi-email\" placeholder=\"jon.snow@nightswatch.org\" value={this.state.personalData.email} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-phone\">Phone</Label>\r\n                        <Input type=\"text\" name=\"phone\" id=\"pi-phone\" placeholder=\"(555) 555-5555\" value={this.state.personalData.phone} onChange={this.onChange}  />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-chatname\">Chat Name</Label>\r\n                        <Input type=\"text\" name=\"chatname\" id=\"pi-chatname\" placeholder=\"jsnow\" value={this.state.personalData.chatname} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-bio\">Biography</Label>\r\n                        <Input type=\"textarea\" name=\"bio\" id=\"pi-bio\" placeholder=\"I lived one hell of a life (and death and life). Heir to the Iron Throne but raised as a bastard. I rode a dragon a couple times. Also, I had sex with my aunt, then killed her.\" value={this.state.personalData.bio} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <Button onClick={() => this.props.onProfileSave(this.state.personalData)}>Save</Button>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    providerFormHTML = () => {\r\n        return (\r\n            <div className=\"personalInfo-editable\">\r\n                <Form>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-name\">Full Name</Label>\r\n                        <Input type=\"text\" name=\"name\" id=\"pi-name\" placeholder=\"Jon Snow\" value={this.state.personalData.name} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-email\">Email</Label>\r\n                        <Input type=\"email\" name=\"email\" id=\"pi-email\" placeholder=\"jon.snow@nightswatch.org\" value={this.state.personalData.email} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <Button onClick={() => this.props.onProfileSave(this.state.personalData)}>Save</Button>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    editableHTML = () => {\r\n        const { role } = this.props;\r\n        if (role === \"Patient\") {\r\n            return this.patientFormHTML();\r\n        }\r\n        else {\r\n            return this.providerFormHTML();\r\n        }   \r\n    }\r\n\r\n    patientProfileInfo = (personalData) => {\r\n        return (\r\n            <div class=\"profile-page\">\r\n                <div align=\"center\">\r\n                    <div align=\"right\">\r\n                        <Button variant=\"light\" onClick={this.props.onProfileEdit}>Edit Profile<img src ={editPic} width=\"35\" height=\"35\"/></Button>\r\n                    </div>\r\n                    <img class=\"profile-picture-onPage\" src={profilePic}/>\r\n                    <h2>{personalData.name}</h2>\r\n                </div>\r\n                <div>\r\n                    <div class=\"biography\" align=\"center\">\r\n                        <div class=\"biographyHeader\">\r\n                        <h4>About Me: </h4>\r\n                        </div>\r\n                        <p>{personalData.bio} </p>\r\n                    </div>\r\n                    <div class=\"userInfo\" align=\"center\">\r\n                        <h6>Sex: {personalData.sex}</h6>\r\n                        <h6>Birthday: {personalData.birthday.split('T')[0]}</h6>\r\n                        <h6>Address: {personalData.address.street} {personalData.address.city}, {personalData.address.state} {personalData.address.zip}</h6>\r\n                        <h6>Email: {personalData.email}</h6>\r\n                        <h6>Phone: {personalData.phone}</h6>\r\n                        <h6>Chat Name: {personalData.chatname}</h6>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );  \r\n    }\r\n\r\n    providerProfileInfo = (personalData) => {\r\n        return (\r\n            <div>\r\n                <h2>Name: {personalData.name}</h2>\r\n                <h6>Email: {personalData.email}</h6>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    staticHTML = () => {\r\n        const { personalData, role } = this.props;\r\n        if (role === \"Patient\") {\r\n            return (\r\n                <div className=\"personalInfo-static\" align=\"center\">\r\n                {this.patientProfileInfo(personalData)}\r\n            </div>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <div className=\"personalInfo-static\">\r\n                {this.providerProfileInfo(personalData)}\r\n                <div>\r\n                    <Button onClick={this.props.onProfileEdit}>Edit</Button>\r\n                </div>\r\n            </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n        console.log(this.state.personalData);\r\n        if (e.target.name === \"street\" || e.target.name === \"city\"   ||\r\n            e.target.name === \"state\"  || e.target.name === \"zip\") {\r\n            this.setState({\r\n                personalData: {\r\n                    ...this.state.personalData,\r\n                    address: {\r\n                        ...this.state.personalData.address,\r\n                        [e.target.name]: e.target.value\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({ \r\n                personalData: {\r\n                    ...this.state.personalData,\r\n                    [e.target.name]: e.target.value \r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { editable } = this.props;\r\n        if (editable) {\r\n            return this.editableHTML();\r\n        } else {\r\n            return this.staticHTML();\r\n        }\r\n    }\r\n}\r\n\r\nexport default PersonalInfo;\r\n","import React, { Component } from 'react';\r\nimport { Button, Form, FormGroup, Input } from 'reactstrap';\r\nimport { addProfileModule } from '../../actions/profileActions';\r\nimport { connect } from 'react-redux';\r\nimport '../../css/ProfileModule.css';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ProfileModule extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: this.props.name,\r\n            content: this.props.content,\r\n            editable: this.props.editable\r\n        }\r\n    }\r\n\r\n    editableHTML = () => {\r\n        return (\r\n            <div className=\"profileModule-content\">\r\n                <Form>\r\n                    <FormGroup>\r\n                        <Input type=\"text\" name=\"name\" id=\"form-name\" placeholder=\"Name\" value={this.state.name} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Input type=\"textarea\" name=\"content\" id=\"form-content\" placeholder=\"Content\" value={this.state.content} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <Button onClick={this.onSave}>Save</Button>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onChange = (e) => {\r\n        console.log(\"onChange\");\r\n        this.setState({\r\n            [e.target.name] : e.target.value\r\n        });\r\n    }\r\n\r\n    onSave = (e) => {\r\n        console.log(\"onSave\");\r\n        this.props.addProfileModule(\r\n            {\r\n                name: this.state.name,\r\n                content: this.state.content\r\n            }\r\n        );\r\n        this.setState({editable: false});\r\n    }\r\n\r\n    staticHTML = () => {\r\n        return (\r\n            <div className=\"profileModule-content\">\r\n                <div>\r\n                    <h3 id=\"name\">{this.state.name}</h3>\r\n                </div>\r\n                <div>\r\n                    <h4 id=\"content\">{this.state.content}</h4>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        console.log(this.props);\r\n        console.log(this.state);\r\n    }\r\n\r\n    render() {\r\n\r\n        const { loading } = this.props;\r\n        const { editable } = this.state;\r\n\r\n        if (loading) {\r\n            return (\r\n                <div>\r\n                    Loading . . .\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"profileModule-container\">\r\n                {\r\n                    editable ? this.editableHTML() : this.staticHTML()\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nProfileModule.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    content: PropTypes.string.isRequired,\r\n    editable: PropTypes.bool.isRequired,\r\n    // saved: PropTypes.bool.isRequired,\r\n    addProfileModule: PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    // editable: state.profileState.editable,\r\n    loading: state.profileState.loading\r\n});\r\n\r\nexport default connect(mapStateToProps, { addProfileModule })(ProfileModule);\r\n","import React, { Component } from 'react';\r\nimport PersonalInfo from './PersonalInfo';\r\nimport ProfileModule from './ProfileModule';\r\nimport { Button } from 'reactstrap';\r\nimport { editProfile, saveProfile } from '../../actions/profileActions';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport '../../css/Profile.css';\r\nclass Profile extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            role: props.roles[0].name,\r\n        }\r\n    }\r\n\r\n    onProfileSave = (updatedPersonalData) => {\r\n        this.props.saveProfile(updatedPersonalData, this.state.role);\r\n    }\r\n\r\n    onProfileEdit = () => {\r\n        this.props.editProfile();\r\n    }\r\n\r\n    profileModulesHTML = profileModules => {\r\n        var merged = [].concat.apply([], profileModules);\r\n        profileModules = merged;\r\n        return profileModules.map(profileModule => (\r\n            <ProfileModule name={profileModule.name} content={profileModule.content} editable={this.props.editable} />\r\n        ));\r\n    };\r\n    \r\n    // addProfileModule = () => { \r\n    //     this.setState(prevState => ({\r\n    //         profileModules: [...prevState.profileModules, \r\n    //             {\r\n    //                 name: \"Name\",\r\n    //                 content: \"Content\",\r\n    //                 editable: true   \r\n    //             }\r\n    //         ]\r\n    //     }));\r\n    // }\r\n\r\n    render() {\r\n        const { personalData, profileSaving, error, editable } = this.props;\r\n        \r\n        if (error) {\r\n            return (\r\n                <div>\r\n                    Error: {error.message}\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (profileSaving) {\r\n            return (\r\n                <div>\r\n                    Saving profile . . .\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"profile-container\" align=\"center\">\r\n                <h1 class=\"header\">Profile</h1>\r\n                <div className=\"main\" align=\"center\">\r\n                    <div className=\"personalInfo-container\">\r\n                        <PersonalInfo personalData={personalData} onProfileSave={this.onProfileSave} onProfileEdit={this.onProfileEdit} editable={editable} role={this.state.role} />\r\n                    </div>\r\n                    {/* <div className=\"profileModules-container\">\r\n                        {this.profileModulesHTML(this.state.profileModules)}\r\n                        <Button onClick={this.addProfileModule}>+</Button>\r\n                    </div>                 */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nProfile.propTypes = {\r\n    editProfile: PropTypes.func.isRequired,\r\n    saveProfile: PropTypes.func.isRequired,\r\n    editable: PropTypes.object.isRequired,\r\n    personalData: PropTypes.object.isRequired,\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    personalData: state.profileState.profile.personalData,\r\n    editable: state.profileState.editable,\r\n    profileLoading: state.profileState.loadingProfile,\r\n    profileSaving: state.profileState.profileSaving,\r\n    error: state.profileState.error,\r\n    roles: state.authState.roles,\r\n});\r\n\r\nexport default connect(mapStateToProps, { editProfile, saveProfile })(Profile);","import React, { Component } from 'react';\r\nimport '../../css/Resources.css';\r\n\r\nclass Resources extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"Resources-container\">\r\n                <h1 class=\"header\">Resources</h1>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Resources;\r\n\r\n","// import React from 'react';\r\n// import MessageList from './components/MessageList'; \r\n// import SendMessageForm from './components/SendMessageForm'; \r\n// import RoomList from './components/RoomList'; \r\n// import NewRoomForm from './components/NewRoomForm'; \r\n// import { tokenUrl, instanceLocator } from './config'; \r\n// // import { ChatManager, TokenProvider } from '@pusher/chatkit-client'; \r\n// import { loadProfile } from '../../actions/profileActions'; \r\n// import { connect } from 'react-redux'; \r\n// import auth0client from '../../auth/Auth'; \r\n// import '../../css/Inbox.css'; \r\n\r\n// class Inbox extends React.Component {\r\n\r\n//   constructor(props) {\r\n//     super(props);\r\n//     this.state = {\r\n//       messages: [], \r\n//       roomId: null, \r\n//       joinableRooms: [], \r\n//       joinedRooms: [], \r\n//       userId: props.profile.personalData.name \r\n//     };\r\n//     console.log(props);\r\n//   }\r\n  \r\n\r\n//   componentDidMount() {    \r\n//     // Make a register users module which registers users with Chat Kit and instantiates chats with providers \r\n\r\n//     // Create new ChatManager with user and instance \r\n//     const chatManager = new ChatManager({\r\n//       instanceLocator, \r\n//       userId: this.state.userId, \r\n//       tokenProvider: new TokenProvider({\r\n//         // TokenUrl may point to backend Node Server. How would it interface with ChatKit API ??? \r\n//         url: `http://localhost:5000/api/chatAuth`, \r\n//         queryParams: {\r\n//           user_id: this.state.userId \r\n//         }\r\n//       })\r\n//     }); \r\n//     chatManager.connect({\r\n//       onAddedToRoom: room => {\r\n//         console.log(`Added to room: ${room.name}`)\r\n//       }\r\n//     }) \r\n//       .then(currentUser => {\r\n//         // CurrentUser is interface to communicate with ChatKit API. \r\n//         this.currentUser = currentUser; \r\n\r\n//         this.getRooms(); \r\n\r\n//       })\r\n//       .catch(error => console.log(error)); \r\n//   } \r\n\r\n//   // Connect to room based on sidebar \r\n//   subscribeToRoom = (roomId) => {\r\n//     this.setState({ messages: [] })\r\n//     this.currentUser.subscribeToRoomMultipart({\r\n//       roomId, \r\n//       // messageLimit: 100, \r\n//       hooks: {\r\n//         onMessage: message => {\r\n//           console.log('Message Text: ', message); \r\n//           this.setState({ \r\n//             messages: [...this.state.messages, message]  \r\n//           })\r\n//         }\r\n//       }\r\n//     })\r\n//       .then(room => {\r\n//         this.setState({ roomId: room.id }); \r\n//         this.getRooms(); \r\n//       })\r\n//       .catch(error => console.log(error)); \r\n//     }\r\n\r\n//   // Get all rooms joined and not joined in the session \r\n//   getRooms = () => {\r\n//     this.currentUser.getJoinableRooms() \r\n//         .then(joinableRooms => {\r\n//           this.setState({\r\n//             joinableRooms, \r\n//             joinedRooms: this.currentUser.rooms\r\n//           })\r\n//         })\r\n//         .catch(error => console.log(error)); \r\n//   }\r\n\r\n//   sendMessage = (text) => {\r\n//     this.currentUser.sendSimpleMessage({\r\n//       text, \r\n//       roomId: this.state.roomId \r\n//     }); \r\n//   }\r\n\r\n//   createRoom = (person) => {\r\n\r\n//     let contains = false; \r\n//     this.currentUser.rooms.forEach(room => {\r\n//       if(room.name === this.state.userId + '+' + person) contains = true; \r\n//     })\r\n\r\n//     if(!contains) {\r\n//       this.currentUser.createRoom({ \r\n//         name: this.state.userId + '+' + person, \r\n//         private: true, \r\n//         addUserIds: [person]\r\n//       }) \r\n//       .then(room => this.subscribeToRoom(room.id)) \r\n//       .catch(error => console.log(error)); \r\n//     }\r\n//   }\r\n\r\n//   render() {\r\n//     return (\r\n//       <div className=\"container\">\r\n//         <h1 class=\"header\">Inbox</h1>\r\n//         <div className=\"inbox\">\r\n//           <RoomList rooms={[...this.state.joinableRooms, ...this.state.joinedRooms]}\r\n//                     subscribeToRoom={this.subscribeToRoom}\r\n//                     roomId={this.state.roomId}\r\n//                     userId={this.state.userId}/> \r\n//           <MessageList messages={this.state.messages}\r\n//                         roomId={this.state.roomId}/> \r\n//           <SendMessageForm sendMessage={this.sendMessage}\r\n//                             disabled={!this.state.roomId}/> \r\n//           <NewRoomForm createRoom={this.createRoom}/> \r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   } \r\n// }\r\n\r\n// const mapStateToProps = state => ({\r\n//   profile: state.profileState.profile \r\n// });\r\n\r\n// export default connect(mapStateToProps, { loadProfile })(Inbox); \r\n\r\nimport React, { Component } from 'react'\r\n\r\nexport default class Inbox extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Welcome to the Inbox!\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n","import { \r\n    FETCH_ROLES_BEGIN, \r\n    FETCH_ROLES_SUCCESS, \r\n    FETCH_ROLES_FAILURE, \r\n    AUTH0_REGISTRATION_BEGIN, \r\n    AUTH0_REGISTRATION_SUCCESS, \r\n    AUTH0_REGISTRATION_FAILURE, \r\n    ASSIGN_ROLES_BEGIN, \r\n    ASSIGN_ROLES_SUCCESS, \r\n    ASSIGN_ROLES_FAILURE \r\n } from './types';\r\n\r\nimport axios from 'axios';\r\nimport auth0client from '../auth/Auth';\r\nimport { MEDLOCK_URL } from '../config/servers';\r\n\r\nexport const fetchRolesBegin = () => ({\r\n    type: FETCH_ROLES_BEGIN\r\n});\r\n  \r\nexport const fetchRolesSuccess = roles => ({\r\n    type: FETCH_ROLES_SUCCESS,\r\n    payload: {\r\n        roles\r\n    }\r\n});\r\n\r\nexport const fetchRolesFailure = error => ({\r\n    type: FETCH_ROLES_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n  \r\nexport function fetchRoles(API_MANAGEMENT_TOKEN) {\r\n    console.log(\"action initiated: fetchRoles\");\r\n    const user_id = auth0client.userProfile.sub; \r\n\r\n    const API_URL = `https://medlock-dev.auth0.com/api/v2/users/${user_id}/roles`;\r\n    const headers = { \r\n        authorization: `Bearer ${API_MANAGEMENT_TOKEN}`,\r\n    };\r\n    \r\n    return dispatch => {\r\n      dispatch(fetchRolesBegin());\r\n      return axios.get(API_URL, { headers })\r\n        .then(res => {\r\n          dispatch(fetchRolesSuccess(res.data));\r\n        })\r\n        .catch(error => {\r\n            dispatch(fetchRolesFailure(error));\r\n        });\r\n    };\r\n} \r\n\r\nconst auth0RegistrationBegin = () => ({\r\n    type: AUTH0_REGISTRATION_BEGIN\r\n});\r\n\r\nconst auth0RegistrationSuccess = userProfile => ({\r\n    type: AUTH0_REGISTRATION_SUCCESS,\r\n    payload: {\r\n        userProfile\r\n    }\r\n});\r\n\r\nconst auth0RegistrationFailure = error => ({\r\n    type: AUTH0_REGISTRATION_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n\r\n});\r\n\r\nexport function auth0Registration(newUser, API_MANAGEMENT_TOKEN) {\r\n    const API_URL = 'https://medlock-dev.auth0.com/api/v2/users';\r\n    const headers = { authorization: `Bearer ${API_MANAGEMENT_TOKEN}`, \r\n                    'content-type': 'application/json' };\r\n\r\n    return dispatch => {\r\n        dispatch(auth0RegistrationBegin());\r\n        return axios.post(API_URL, newUser, { headers })\r\n            .then(res => {\r\n                dispatch(auth0RegistrationSuccess(res.data));\r\n            })\r\n            .catch(error => {\r\n                console.log(`auth0registration: ${error}`);\r\n                dispatch(auth0RegistrationFailure(error));\r\n                throw error;\r\n            });\r\n    }\r\n}\r\n\r\nconst assignRolesBegin = () => ({\r\n    type: ASSIGN_ROLES_BEGIN\r\n});\r\n\r\nconst assignRolesSuccess = role => ({\r\n    type: ASSIGN_ROLES_SUCCESS,\r\n    payload: {\r\n        role\r\n    }\r\n});\r\n\r\nconst assignRolesFailure = error => ({\r\n    type: ASSIGN_ROLES_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\n\r\nexport function assignRoles(user_id, API_MANAGEMENT_TOKEN, role) {\r\n    const API_URL = `https://medlock-dev.auth0.com/api/v2/users/${user_id}/roles`;\r\n    const headers = { authorization: `Bearer ${API_MANAGEMENT_TOKEN}`, \r\n                    'Content-Type': 'application/json' };\r\n\r\n    let req_body = {}; \r\n\r\n    switch(role) {\r\n        case \"Patient\": \r\n            req_body = {\r\n                \"roles\": [\r\n                    \"rol_3rJHjXxeLiD1ZJLo\" \r\n                ]\r\n            }\r\n            break; \r\n        case \"Provider\": \r\n            req_body = {\r\n                \"roles\": [\r\n                    \"rol_eXgwl6628aJ35Cq4\" \r\n                ]\r\n            }\r\n            break; \r\n        default: \r\n    } \r\n\r\n    return dispatch => {\r\n        dispatch(assignRolesBegin());\r\n        return axios.post(API_URL, req_body, { headers })\r\n            .then(res => {\r\n                dispatch(assignRolesSuccess(res.data));\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                dispatch(assignRolesFailure(error));\r\n            });\r\n    }\r\n}\r\n\r\n","import axios from 'axios'; \r\nimport { MEDLOCK_URL } from '../config/servers';\r\n\r\n\r\nexport function getUserByEmail(email, AMT) {\r\n    const API_URL = `https://medlock-dev.auth0.com/api/v2/users-by-email?email=${email}`;\r\n    const headers = { authorization: `Bearer ${AMT}`, \r\n                    'content-type': 'application/json' };\r\n    \r\n    const promise = axios.get(API_URL, { headers }); \r\n\r\n    return promise; \r\n}\r\n\r\n\r\nexport function fetchAMT() {\r\n    console.log(\"called function: fetchAMT\");\r\n    const AMTHeader = { \r\n        'Content-Type': 'application/json',\r\n        'Access-Control-Allow-Origin': MEDLOCK_URL,\r\n     }; \r\n    const AMTBody = {\"client_id\":\"Wf9NsAneKffcZ8y24IhMzjZ4C3JvIken\",\"client_secret\":\"sPFQ_UQ1G5e20F87cc2MDU-BDjzG1i9CHEnOISfnuHSgyYGvI_zhXQR5nsZto-tA\",\"audience\":\"https://medlock-dev.auth0.com/api/v2/\",\"grant_type\":\"client_credentials\"}; \r\n    const API_URL = `https://medlock-dev.auth0.com/oauth/token`;\r\n    console.log(AMTHeader);\r\n    const promise = axios.post(API_URL, AMTBody, AMTHeader); \r\n\r\n    return promise; \r\n\r\n}\r\n\r\nexport function resetPassword(email) {\r\n    const URL = 'https://medlock-dev.auth0.com/dbconnections/change_password'; \r\n    const headers = { 'Content-Headers': 'application/json' }; \r\n    const body = {\r\n        'client_id': 'Wf9NsAneKffcZ8y24IhMzjZ4C3JvIken', \r\n        'email': email, \r\n        'connection': 'Username-Password-Authentication' \r\n    } \r\n\r\n    const promise = axios.post(URL, body, headers) \r\n        .then(res => {\r\n            console.log(`Reset Password: ${res.data}`); \r\n        }) \r\n        .catch(error => console.log(error)); \r\n        \r\n    return promise; \r\n        \r\n} \r\n\r\n// THERE IS NO SECURITY HERE ??? \r\n// Store hashed password ??? \r\n// This does NOT work at the moment. \r\nexport function newPassword(password, user_id, AMT) {\r\n    const URL = `https://medlock-dev.auth0.com/api/v2/users/${user_id}`; \r\n    const headers = { 'Content-Type': 'application/json', \r\n                    authorization: `Bearer ${AMT}` }; \r\n    const body = {\r\n        'password': password, \r\n        'connection': 'Username-Password-Authentication' \r\n    }\r\n\r\n    const promise = axios.patch(URL, body, headers) \r\n        .then(res => {\r\n            console.log(`New Password: ${res.data}`); \r\n        }) \r\n        .catch(error => console.log(error)); \r\n        \r\n    return promise; \r\n        \r\n}\r\n","import React from 'react';\r\nimport { Route, Redirect, withRouter } from 'react-router-dom';\r\nimport auth0client from '../auth/Auth';\r\nimport history from '../components/nav/history';\r\n\r\nfunction SecuredRoute({component: Component, ...rest}) {\r\n    return (\r\n        <div>\r\n            <Route \r\n                {...rest}\r\n                render={ props => {\r\n                    return auth0client.isAuthenticated() ? (\r\n                        <Component {...rest} />\r\n                    ) : (\r\n                        <Redirect\r\n                            to={{\r\n                                pathname: \"/\",\r\n                                state: { from: props.location }\r\n                            }}\r\n                        />\r\n                    );\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(SecuredRoute);\r\n","import React, { Component } from 'react';\r\nimport profilePic from './profile_pic.jpg';\r\nimport '../../css/UserInfo.css';\r\n\r\nexport default class UserInfo extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"UserInfo\">\r\n                <div className=\"dropdown\">\r\n                    {this.props.name}\r\n                </div>\r\n                <div>\r\n                    <img className=\"profile-picture\" src={profilePic} alt=\"Profile Picture\"/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'; \r\nimport '../../css/DashHeader.css'; \r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n// TODO: Style button and toggle functionality \r\n\r\n\r\nclass AddDispenser extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"add-dispenser-btn\" onClick={this.props.displayCodeCallback} style={{cursor:'pointer'}}>\r\n                + Add Dispenser\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nAddDispenser.propTypes = {\r\n    displayCodeCallback: PropTypes.func.isRequired \r\n}; \r\n\r\n\r\nexport default AddDispenser; ","import React, { Component } from 'react'; \r\nimport '../../css/DashHeader.css'; \r\nimport bigLogo from '../../icons/white-logo.png'; \r\nimport UserInfo from './UserInfo';\r\nimport AddDispenser from './AddDispenser'; \r\nimport menuIcon from '../../icons/round-menu-24px.svg';\r\nimport PropTypes from 'prop-types';\r\n\r\n// TODO: Develop logic to display or hide Add Dispenser button by role and registration \r\n\r\nclass DashHeader extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    collapsedSideBarJSX = () => {\r\n        return (\r\n            <div className=\"DashHeader\" >\r\n                <div className=\"menuIcon-container collapsed\" onClick={this.props.toggleSideBar}>\r\n                    <img className=\"menuIcon\" src={menuIcon} />\r\n                </div>\r\n                <div className=\"quote\">\r\n                    <body>\r\n                        <p>\"You never know how strong you are until being strong is your only choice.\"</p>\r\n                    </body>\r\n                </div>\r\n                <div className=\"AddDispenser-container\">\r\n                    <AddDispenser displayCodeCallback={this.props.displayDispenserCode} /> \r\n                </div>\r\n                <div className=\"UserInfo-container\">\r\n                    <UserInfo name={this.props.name} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    expandedSideBarToggleJSX = () => {\r\n        return (\r\n            <div className=\"DashHeader\" >\r\n                <div className=\"menuIcon-container expanded\" onClick={this.props.toggleSideBar}>\r\n                    <img className=\"menuIcon\" src={menuIcon} />\r\n                </div>\r\n                <div className=\"AddDispenser-container\">\r\n                    <AddDispenser displayCodeCallback={this.props.displayDispenserCode} /> \r\n                </div>\r\n                <div className=\"UserInfo-container\">\r\n                    <UserInfo name={this.props.name} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    expandedSideBarNoToggleJSX = () => {\r\n        return (\r\n            <div className=\"DashHeader\" >\r\n                <div></div>\r\n                <div className=\"quote\">\r\n                    <body>\r\n                        <p>\"You never know how strong you are until being strong is your only choice.\"</p>\r\n                    </body>\r\n                </div>\r\n                <div className=\"AddDispenser-container\">\r\n                    <AddDispenser displayCodeCallback={this.props.displayDispenserCode} /> \r\n                </div>\r\n                <div className=\"UserInfo-container\">\r\n                    <UserInfo name={this.props.name} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"DashHeader\">\r\n                <div className=\"AddDispenser-container\">\r\n                    <AddDispenser displayCodeCallback={this.props.displayDispenserCode} /> \r\n                </div>\r\n                <div className=\"UserInfo-container\">\r\n                    <UserInfo name={this.props.name} />\r\n                </div>\r\n            </div>\r\n        )\r\n        // if (this.props.sideBarCollapsed) {\r\n        //     return this.collapsedSideBarJSX();\r\n\r\n        // } else if (this.props.sideBarToggle) { //expanded and able to toggle\r\n        //     return this.expandedSideBarToggleJSX();\r\n        // } else { //expanded and unable to toggle\r\n        //     return this.expandedSideBarNoToggleJSX();\r\n        // }\r\n    }\r\n}\r\n\r\nDashHeader.propTypes = {\r\n    displayDispenserCode: PropTypes.func.isRequired\r\n}\r\n\r\nexport default DashHeader; \r\n","// Include Profiles Section \r\nimport InboxIcon from '../../icons/round-email-24px.svg';\r\nimport MyDataIcon from '../../icons/round-timeline-24px.svg';\r\nimport ResourcesIcon from '../../icons/round-folder-24px.svg';\r\nimport DashboardIcon from '../../icons/round-home-24px.svg';\r\nimport ProfileIcon from '../../icons/round-person-24px.svg';\r\nimport MyPatientsIcon from '../../icons/round-people-24px.svg';\r\n\r\nexport const modules = [\r\n    {\r\n        name: 'Dashboard',\r\n        id: 'dashboard', \r\n        roles: null,\r\n        content: {\r\n            icon: DashboardIcon,\r\n        },\r\n        link: '/dashboard',\r\n    }, \r\n    {\r\n        name: 'Inbox', \r\n        id: 'inbox',\r\n        roles: [\r\n            {\r\n                name: 'Provider', \r\n                description: 'Access messages from patients and other providers'\r\n            }, \r\n            {\r\n                name: 'Patient', \r\n                description: 'Access messages from my providers '\r\n            }\r\n        ], \r\n        content: {\r\n            icon: InboxIcon, \r\n        },\r\n        link: '/dashboard/inbox'\r\n    },\r\n    {\r\n        name: 'My Data',\r\n        id: 'mydata',\r\n        roles: [\r\n            {\r\n                name: 'Patient', \r\n                description: 'Track my medication consumption and pain management '\r\n            }\r\n        ], \r\n        content:  {\r\n            icon: MyDataIcon,\r\n        },\r\n        link: '/dashboard/mydata'\r\n    },\r\n    {\r\n        name: 'Resources',\r\n        id: 'resources',\r\n        roles: [\r\n            {\r\n                name: 'Provider', \r\n                description: 'View resources on the latest opioid regulations '\r\n            }, \r\n            {\r\n                name: 'Patient', \r\n                description: 'View resources to help maintain sobriety '\r\n            }\r\n        ],  \r\n        content: {\r\n            icon: ResourcesIcon,\r\n        },\r\n        link: '/dashboard/resources'\r\n    }, \r\n    {\r\n        name: 'My Patients', \r\n        id: 'mypatients',\r\n        roles: [\r\n            {\r\n                name: 'Provider', \r\n                description: 'View a list of all your patients ' \r\n            }\r\n        ], \r\n        content: {\r\n            icon: MyPatientsIcon, \r\n        }, \r\n        link: '/dashboard/mypatients' \r\n    },\r\n    {\r\n        name: 'Profile',\r\n        id: 'profile',\r\n        roles: [\r\n            {\r\n                name: 'Patient',\r\n                description: 'View and edit your profile '\r\n            },\r\n            {\r\n                name: 'Provider',\r\n                description: 'View and edit your profile '\r\n            }\r\n        ],\r\n        content: {\r\n            icon: ProfileIcon,\r\n        },\r\n        link: '/dashboard/profile'\r\n    },\r\n    {\r\n        name: 'Surveys',\r\n        id: 'surveys',\r\n        roles: [\r\n            {\r\n                name: 'Patient', \r\n                description: 'Take surveys'\r\n            }\r\n        ], \r\n        content:  {\r\n            icon: MyDataIcon,\r\n        },\r\n        link: '/dashboard/survey'\r\n    },\r\n    {\r\n        name: 'Dispenser',\r\n        id: 'dispenser',\r\n        roles: [\r\n            {\r\n                name: 'Patient', \r\n                description: 'Simulate dispenses'\r\n            }\r\n        ], \r\n        content:  {\r\n            icon: MyDataIcon,\r\n        },\r\n        link: '/dashboard/dispenser'\r\n    }\r\n\r\n]","import React, { Component } from 'react'\r\n\r\nexport default class PersonalDataView extends Component {\r\n    render() {\r\n        const { personalData } = this.props;\r\n        return (\r\n            <div className=\"PersonalDataView\">\r\n                <div className=\"content\">\r\n                    <h4>{personalData.name}</h4>\r\n                    <h6>Bio: {personalData.bio} </h6>\r\n                    <h6>Sex: {personalData.sex}</h6>\r\n                    <h6>Birthday: {personalData.birthday.split('T')[0]}</h6>\r\n                    <h6>Address: {personalData.address.street} {personalData.address.city}, {personalData.address.state} {personalData.address.zip}</h6>\r\n                    <h6>Email: {personalData.email}</h6>\r\n                    <h6>Phone: {personalData.phone}</h6>\r\n                    <h6>Chat Name: {personalData.chatname}</h6>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Button } from 'reactstrap';\r\n\r\nexport default class SideBarItem extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"SideBarItem\" >\r\n                <Button\r\n                    onClick={() => {\r\n                        this.props.history.push(this.props.module.link)\r\n                    }}\r\n                >{this.props.module.name}</Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport infoIcon from '../../../icons/003-info.svg';\r\nimport history from '../history';\r\n\r\n\r\nexport default class ModuleLink extends Component {\r\n    \r\n    route = () => {\r\n        history.push(this.props.module.link);\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div className=\"ModuleLink\" onClick={this.route}>\r\n                <div>\r\n                    <img className=\"ModuleLink-icon\" src={this.props.module.content.icon} />\r\n                </div>\r\n                <div className=\"ModuleLink-name\">\r\n                    <p>{this.props.module.name}</p>\r\n                    {/* <button className=\"SideBarButton\"\r\n                        onClick={() => {\r\n                            this.props.history.push(this.props.module.link)\r\n                        }}\r\n                    >{this.props.module.name}</button> */}\r\n                </div>\r\n                <div>\r\n                    <img src='' />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport bigLogo from '../../../icons/white-logo.png'; \r\nimport collapsedMenuIcon from '../../../icons/round-menu-24px.svg';\r\nimport { withRouter } from 'react-router-dom';\r\nimport auth0client from '../../../auth/Auth';\r\nimport { modules } from '../ModuleInfo'; \r\nimport '../../../css/SideBar.css';\r\n\r\nimport SideBarItem from './SideBarItem';\r\nimport PersonalDataView from '../../patientView/PersonalDataView';\r\nimport ModuleLink from './ModuleLink';\r\n\r\nclass SideBar extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            modules,\r\n        }\r\n    }\r\n\r\n    containsRole = (roles, requiredRole) => {\r\n        var retval = false;\r\n        roles.forEach(role => {\r\n            if (role.name === requiredRole) \r\n                retval = true;\r\n        });\r\n        return retval;\r\n    }\r\n\r\n    filterModules = () => {\r\n\r\n        const { roles } = this.props;\r\n        const role = roles[0].name;\r\n        const newModules = modules.filter(module => {\r\n            // module can be seen by all roles\r\n            if (module.roles === null) return true;\r\n\r\n            // module can only be seen by specific role\r\n            else if (this.containsRole(module.roles, role)) return true;\r\n\r\n            // module filtered out\r\n            else return false;\r\n        });\r\n        this.setState({modules: newModules});\r\n    }\r\n\r\n    componentDidMount() {    \r\n        this.filterModules();\r\n    }\r\n    \r\n    sideBarItemsHTML = () => {\r\n        return (\r\n                <div className=\"ModuleLinks-container\">\r\n                    <h6 className=\"SideBar-subtitle\">NAVIGATE</h6>\r\n                        {this.state.modules.map(module => {\r\n                            return (\r\n                                <ModuleLink \r\n                                    module={module} />\r\n                            );\r\n                        })}\r\n                </div>\r\n        );\r\n    }\r\n\r\n    expandedSideBar = () => {\r\n        if (this.props.togglable) {\r\n            return (\r\n                <div className=\"SideBar\">\r\n                    <div className=\"logo-container\">\r\n                        <img className=\"dash-logo\" src={bigLogo} />\r\n                        <img id=\"collapsedMenuItem\" src={collapsedMenuIcon} onClick={this.props.toggle}></img>\r\n                    </div>\r\n                    <div className=\"SideBar-welcome\">\r\n                        <h4>Welcome <strong>{this.props.personalData.name}</strong></h4>\r\n                    </div>\r\n                    {this.sideBarItemsHTML()}\r\n                    <div className=\"logoutButton-container\">\r\n                        <button\r\n                            className=\"logoutButton\"\r\n                            onClick={auth0client.logout}\r\n                        >Logout</button>\r\n                    </div>\r\n                </div>\r\n            );\r\n\r\n        } else {\r\n            return (\r\n                <div className=\"SideBar\">\r\n                    <div className=\"logo-container\">\r\n                        <img className=\"dash-logo\" src={bigLogo} />\r\n                        <img id=\"collapsedMenuItem\" src={collapsedMenuIcon} onClick={this.props.toggle}></img>\r\n                    </div>\r\n                    <div className=\"SideBar-welcome\">\r\n                        <h4>Welcome <strong>{this.props.personalData.name}</strong></h4>\r\n                    </div>\r\n                    {this.sideBarItemsHTML()}\r\n                    <div className=\"logoutButton-container\">\r\n                        <button\r\n                            className=\"logoutButton\"\r\n                            onClick={auth0client.logout}\r\n                        >Logout</button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    collapsedSideBar = () => {\r\n        return (\r\n            <div className=\"Collapsed\">\r\n                <img id=\"collapsedMenuItem\" src={collapsedMenuIcon} onClick={this.props.toggle}></img>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        if (this.props.collapsed) {\r\n            return this.collapsedSideBar();\r\n        } else {\r\n            return this.expandedSideBar();\r\n        }\r\n    }\r\n}\r\n\r\nexport default withRouter(SideBar);\r\n","import {\r\n  SUBMIT_SURVEY_BEGIN,\r\n  SUBMIT_SURVEY_SUCCESS,\r\n  SUBMIT_SURVEY_FAILURE,\r\n  FETCH_PDISURVEYS_BEGIN,\r\n  FETCH_PDISURVEYS_SUCCESS,\r\n  FETCH_PDISURVEYS_FAILURE\r\n} from './types';\r\nimport auth0client from '../auth/Auth';\r\nimport { MEDLOCK_API } from '../config/servers';\r\n\r\nconst axios = require('axios');\r\n\r\n// Helper functions give access to the status of the request \r\nexport const submitSurveyBegin = () => ({\r\n  type: SUBMIT_SURVEY_BEGIN\r\n});\r\n\r\nexport const submitSurveySuccess = survey => ({\r\n  type: SUBMIT_SURVEY_SUCCESS,\r\n  payload: {\r\n    survey\r\n  }\r\n});\r\n\r\nexport const submitSurveyFailure = error => ({\r\n  type: SUBMIT_SURVEY_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\n// Submit a survey to the server \r\nexport function submitSurvey(survey) {\r\n  const { getAccessToken } = auth0client;\r\n  const API_URL = MEDLOCK_API;\r\n  const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n  \r\n  return dispatch => {\r\n    dispatch(submitSurveyBegin());\r\n    return axios.post(`${API_URL}/pdisurvey`, survey, { headers })\r\n      .then(res => dispatch(submitSurveySuccess(res.data)))\r\n      .catch(error => dispatch(submitSurveyFailure(error)));\r\n  };\r\n  \r\n}\r\n\r\n// Helper functions give access to the status of the request \r\nexport const fetchPDISurveysBegin = () => ({\r\n  type: FETCH_PDISURVEYS_BEGIN\r\n});\r\n\r\nexport const fetchPDISurveysSuccess = surveys => ({\r\n  type: FETCH_PDISURVEYS_SUCCESS,\r\n  payload: {\r\n    surveys\r\n  }\r\n});\r\n\r\nexport const fetchPDISurveysFailure = error => ({\r\n  type: FETCH_PDISURVEYS_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\n// Fetch surveys for a particular user with Access Token \r\nexport function fetchPDISurveys() {\r\n  const { getAccessToken } = auth0client;\r\n  const API_URL = MEDLOCK_API;\r\n  const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n  \r\n  return dispatch => {\r\n    dispatch(fetchPDISurveysBegin());\r\n    return axios.get(`${API_URL}/pdisurvey`, { headers })\r\n      .then(res => {\r\n        console.log(res.data);\r\n        dispatch(fetchPDISurveysSuccess(res.data));\r\n      })\r\n      .catch(error => dispatch(fetchPDISurveysFailure(error)));\r\n  };\r\n}","import {\r\n    FETCH_DISPENSER_BEGIN, \r\n    FETCH_DISPENSER_SUCCESS, \r\n    FETCH_DISPENSER_FAILURE \r\n} from './types'; \r\n\r\nimport auth0client from '../auth/Auth';\r\nimport { MEDLOCK_API } from '../config/servers';\r\n\r\n\r\nconst axios = require('axios'); \r\n\r\n// Helper functions give access to the status of the request \r\nconst fetchDispenserBegin = () => ({\r\n    type: FETCH_DISPENSER_BEGIN \r\n});\r\n  \r\nconst fetchDispenserSuccess = dispenser => ({\r\n    type: FETCH_DISPENSER_SUCCESS,\r\n    payload: { dispenser }\r\n});\r\n\r\nconst fetchDispenserFailure = error => ({\r\n    type: FETCH_DISPENSER_FAILURE,\r\n    payload: { error }\r\n});\r\n\r\n// Fetch Dispenses Data from Server \r\nexport function fetchDispenser(id) {\r\n    console.log(\"fetching dispenser with id: \" + id);\r\n    const { getAccessToken } = auth0client;\r\n    const API_URL = MEDLOCK_API;\r\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n\r\n    return dispatch => {\r\n        dispatch(fetchDispenserBegin());\r\n        return axios.get(`${API_URL}/dispense?id=` + id, { headers })\r\n        .then(res => { \r\n            console.log(res.data);\r\n            dispatch(fetchDispenserSuccess(res.data));\r\n        })\r\n        .catch(error => dispatch(fetchDispenserFailure(error)));\r\n    };\r\n}\r\n","import React, { Component } from 'react';\r\nimport * as d3 from \"d3\";\r\n\r\nexport default class PDISurveyBar extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            svg: null,\r\n            chart: null,\r\n            config: null,\r\n            surveyIndex: props.data.length - 1,\r\n            width: 800,\r\n            height: 300,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        // important in React to ensure that the chart displays\r\n        // only when the component has been mounted on the DOM\r\n        var size = this.getSize();\r\n\r\n        this.setState({width: size.width, height: size.height}, () => {\r\n            this.drawChart();\r\n        });\r\n        \r\n        let resizedFn;\r\n        window.addEventListener(\"resize\", () => {\r\n            clearTimeout(resizedFn);\r\n            resizedFn = setTimeout(() => {\r\n                this.redrawChart();\r\n            }, 200)\r\n        });\r\n    }\r\n\r\n    getWidth() {\r\n        return this.refs.canvas.parentElement.offsetWidth;\r\n    }\r\n\r\n    getHeight() {\r\n        return this.refs.canvas.parentElement.offsetHeight;\r\n    }\r\n\r\n    getSize() {\r\n        const minWidth = 500;\r\n        const maxWidth = 1000;\r\n        const minHeight = 200;\r\n        const maxHeight = 400;\r\n        var curWidth = this.state.width;\r\n        var curHeight = this.state.height;\r\n        let newWidth = this.getWidth();\r\n        let newHeight = this.getHeight();\r\n        var width;\r\n        var height;\r\n\r\n        if (newWidth > minWidth && newWidth < maxWidth) {\r\n            width = newWidth;\r\n        } else {\r\n            width = curWidth;\r\n        }\r\n\r\n        if (newHeight > minHeight && newHeight < maxHeight) {\r\n            height = newHeight;\r\n        } else {\r\n            height = curHeight;\r\n        }\r\n\r\n        var size = {\r\n            width,\r\n            height\r\n        };\r\n\r\n        return size;\r\n    }\r\n\r\n    onSelectChange = (e) => {\r\n        this.setState({\r\n            surveyIndex: e.target.value,\r\n        });\r\n    }\r\n\r\n    surveySelect(dates) {\r\n        return (\r\n            <select onChange={this.onSelectChange}>\r\n                {dates.map((date, i) => {\r\n                        if (i == this.state.surveyIndex) \r\n                            return <option selected=\"selected\" value={i}>{this.formatTimestamp(date)}</option>\r\n                        return <option value={i}>{this.formatTimestamp(date)}</option>\r\n                    })\r\n                }\r\n            </select>\r\n        )\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.state.surveyIndex != prevState.surveyIndex) {\r\n            this.updateChart();\r\n        }\r\n    }\r\n\r\n    parseData() {\r\n        const data = {\r\n            x: this.props.data[this.state.surveyIndex].responses.map(pair => pair['question']),\r\n            y: this.props.data[this.state.surveyIndex].responses.map(pair => Number(pair['answer'])),\r\n        }\r\n        return data;\r\n    }\r\n\r\n    drawChart() {\r\n        const data = this.parseData();\r\n\r\n        const margin = 60;\r\n        const canvasHeight = this.state.height - 2*margin;\r\n        const canvasWidth = this.state.width - 2*margin;\r\n\r\n        const svg = d3.select(this.refs.canvas)\r\n            .append(\"svg\")\r\n            .attr(\"id\", this.props.id)\r\n            .attr(\"height\", this.state.height)\r\n            .attr(\"width\", this.state.width)\r\n        \r\n        const chart = svg.append('g')\r\n            .attr('transform', `translate(${margin}, ${margin})`);\r\n\r\n        const yScale = d3.scaleLinear()\r\n            .range([canvasHeight, 0])\r\n            .domain([0, 10])\r\n\r\n        chart.append('g')\r\n            .call(d3.axisLeft(yScale))\r\n\r\n        const xScale = d3.scaleBand()\r\n            .range([0, canvasWidth])\r\n            .domain(data.x)\r\n            .padding(0.2)\r\n\r\n        chart.append('g')\r\n            .attr('transform', `translate(0, ${canvasHeight})`)\r\n            .call(d3.axisBottom(xScale))\r\n\r\n        // create grid lines\r\n        chart.append('g')\r\n            .attr('class', 'grid')\r\n            .call(d3.axisLeft()\r\n                .scale(yScale)\r\n                .tickSize(-canvasWidth, 0, 0)\r\n                .tickFormat(''))\r\n\r\n        // y-axis label        \r\n        svg.append('text')\r\n            .attr('x', -(canvasHeight / 2) - margin)\r\n            .attr('y', margin / 2.4)\r\n            .attr('transform', 'rotate(-90)')\r\n            .attr('text-anchor', 'middle')\r\n            .text('Pain Disability Index')\r\n        \r\n\r\n        // x-axis label\r\n        svg.append('text')\r\n            .attr('x', canvasWidth / 2 + margin)\r\n            .attr('y', canvasHeight + margin * 1.7)\r\n            .attr('text-anchor', 'middle')\r\n            .text('Categories')\r\n\r\n        // title\r\n        svg.append('text')\r\n            .attr('id', 'title')\r\n            .attr('x', canvasWidth / 2 + margin)\r\n            .attr('y', 40)\r\n            .attr('text-anchor', 'middle')\r\n            .text(`PDI Survey Response for ${this.formatTimestamp(this.props.data[this.state.surveyIndex].date)}`)\r\n\r\n        const config = {\r\n            xScale,\r\n            yScale,\r\n            canvasHeight,\r\n        }\r\n\r\n        // plot data\r\n        chart.selectAll()\r\n            .data(data.y).enter()\r\n            .append(\"rect\")\r\n            .attr('x', (d, i) => xScale(data.x[i]))\r\n            .attr('y', (d, i) => yScale(d))\r\n            .attr('height', (d, i) => canvasHeight - yScale(d))\r\n            .attr('width', xScale.bandwidth())\r\n            .attr('fill', 'var(--medlock-blue)')\r\n\r\n        this.setState({\r\n            svg,\r\n            chart, \r\n            config,\r\n        });\r\n    }\r\n\r\n    redrawChart = () => {\r\n        var size = this.getSize();\r\n        this.setState({width: size.width, height: size.height});\r\n        d3.select(`#${this.props.id}`).remove();\r\n        this.drawChart();\r\n    }\r\n\r\n    updateChart = () => {\r\n        const {svg, chart, config} = this.state;\r\n        const data = this.parseData();\r\n\r\n        chart.selectAll(\"rect\")\r\n            .data(data.y)\r\n            .attr('y', (d, i) => config.yScale(d))\r\n            .attr('height', (d, i) => config.canvasHeight - config.yScale(d))\r\n\r\n        svg.select('#title')\r\n            .text(`PDI Survey Response for ${this.formatTimestamp(this.props.data[this.state.surveyIndex].date)}`)\r\n    }\r\n\r\n    formatTimestamp = (timestamp) => {\r\n        const date = new Date(timestamp);\r\n        return `${date.getMonth()+1}-${date.getDate()}-${date.getFullYear()}`;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={`graph-container ${this.props.id}`} >\r\n                <div ref=\"canvas\"></div>\r\n                <div>{this.surveySelect(this.props.data.map(survey => survey.date))}</div>\r\n            </div>\r\n            );\r\n        }\r\n    }","import React, { Component } from 'react'\r\nimport * as d3 from \"d3\";\r\n\r\nexport default class DateTimeScatter extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            svg: null,\r\n            chart: null,\r\n            config: null,\r\n            width: 800,\r\n            height: 300,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        var size = this.getSize();\r\n\r\n        this.setState({width: size.width, height: size.height}, () => {\r\n            this.drawChart();\r\n        });\r\n\r\n        let resizedFn;\r\n        window.addEventListener(\"resize\", () => {\r\n            clearTimeout(resizedFn);\r\n            resizedFn = setTimeout(() => {\r\n                this.redrawChart();\r\n            }, 200)\r\n        });\r\n    }\r\n\r\n\r\n    getWidth() {\r\n        return this.refs.canvas.parentElement.offsetWidth;\r\n    }\r\n\r\n    getHeight() {\r\n        return this.refs.canvas.parentElement.offsetHeight;\r\n    }\r\n\r\n    getSize() {\r\n        const minWidth = 500;\r\n        const maxWidth = 1000;\r\n        const minHeight = 200;\r\n        const maxHeight = 400;\r\n        var curWidth = this.state.width;\r\n        var curHeight = this.state.height;\r\n        let newWidth = this.getWidth();\r\n        let newHeight = this.getHeight();\r\n        var width;\r\n        var height;\r\n\r\n        if (newWidth > minWidth && newWidth < maxWidth) {\r\n            width = newWidth;\r\n        } else {\r\n            width = curWidth;\r\n        }\r\n\r\n        if (newHeight > minHeight && newHeight < maxHeight) {\r\n            height = newHeight;\r\n        } else {\r\n            height = curHeight;\r\n        }\r\n\r\n        var size = {\r\n            width,\r\n            height\r\n        };\r\n\r\n        return size;\r\n    }\r\n\r\n    addZero(val) {\r\n        if (val < 10)\r\n            return \"0\" + val;\r\n        else\r\n            return \"\" + val;\r\n    }\r\n\r\n    /**\r\n     * @param {array} dates \r\n     */\r\n    getDateRange(dates) {\r\n        var dateRange = [];\r\n\r\n        /**\r\n         * attempting to get date range, off by one day rn\r\n         */\r\n        var first = new Date(dates[0]);\r\n        var last = new Date(dates[dates.length - 1]);\r\n        var cur = first;\r\n        while (cur <= last) {\r\n            dateRange.push(this.formatDate(cur));\r\n            cur.setDate(cur.getDate() + 1);\r\n        }\r\n    }\r\n\r\n    parseData(data) {\r\n        return data.map(set => {\r\n            return set.map(timestamp => {\r\n                const date = new Date(timestamp);\r\n                const x = `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}`       \r\n                const hours = date.getHours();\r\n                const min = date.getMinutes();\r\n                const sec = date.getSeconds();\r\n                const y = hours*3600 + min*60 + sec;\r\n                return [x,y]\r\n            });\r\n        });\r\n    }\r\n\r\n    flattenData(data) {\r\n        // should be called after parseData, add some check for that!\r\n        var flatData = []\r\n        data.forEach((set, i) => {\r\n            set.forEach(xy => {\r\n                flatData.push([xy[0],xy[1],i])\r\n            });\r\n        });\r\n        return flatData;\r\n    }\r\n\r\n    tooltipMouseover = (d, tooltip) => {\r\n        var html = `${this.formatTime(d)}`;\r\n\r\n        tooltip.html(html)\r\n            .style(\"left\", (d3.event.pageX + 15) + \"px\")\r\n            .style(\"top\", (d3.event.pageY - 28) + \"px\")\r\n            .transition()\r\n                .duration(300)\r\n                .style(\"opacity\", 1)\r\n    }\r\n\r\n    tooltipMouseout = (d, tooltip) => {\r\n        tooltip.transition()\r\n            .duration(300)\r\n            .style(\"opacity\", 0)\r\n    }\r\n\r\n    formatDate = (date) => {\r\n        return `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}`;     \r\n    }\r\n\r\n    formatTime = (d) => {\r\n        const hours = Math.floor(d / 3600);\r\n        const minutes = Math.floor((d % 3600) / 60);\r\n        return `${this.addZero(hours)}:${this.addZero(minutes)}`\r\n    }\r\n\r\n    drawChart() {\r\n        var data = this.parseData(this.props.data); // replace dispenses with this.props.data\r\n        data = this.flattenData(data);\r\n        const margin = 60;\r\n        const canvasHeight = this.state.height - 2*margin;\r\n        const canvasWidth = this.state.width - 2*margin;\r\n\r\n        const canvas = d3.select(this.refs.canvas);\r\n        const svg = canvas.append(\"svg\")\r\n            .attr(\"id\", this.props.id)\r\n            .attr(\"height\", this.state.height)\r\n            .attr(\"width\", this.state.width);\r\n\r\n\r\n        \r\n        const chart = svg.append('g')\r\n            .attr('transform', `translate(${margin}, ${margin})`);\r\n\r\n        const yScale = d3.scaleTime()\r\n            .domain([0, 86400])\r\n            .range([canvasHeight, 0])\r\n\r\n        const yAxis = d3.axisLeft()\r\n            .scale(yScale)\r\n            .ticks(8)\r\n            .tickSize(-canvasWidth, 0, 0)\r\n            .tickValues([0, 10800, 21600, 32400, 43200, 54000, 64800, 75600, 86400])\r\n            .tickFormat((d, i) => this.formatTime(d));\r\n\r\n        var dates = data.map(d => d[0]).sort();\r\n        this.getDateRange(dates);\r\n        var xDomain = dates;\r\n        const xScale = d3.scaleBand()\r\n            .range([0, canvasWidth])\r\n            .domain(xDomain)\r\n            .padding(0.2);\r\n\r\n        chart.append('g')\r\n            .attr('transform', `translate(0, ${canvasHeight})`)\r\n            .call(d3.axisBottom(xScale));\r\n\r\n         // create grid lines\r\n         chart.append('g')\r\n            .attr('class', 'grid')\r\n            .call(yAxis);\r\n\r\n        // y-axis label        \r\n        svg.append('text')\r\n            .attr('x', -(canvasHeight / 2) - margin)\r\n            .attr('y', margin / 2.4)\r\n            .attr('transform', 'rotate(-90)')\r\n            .attr('text-anchor', 'middle')\r\n            .text('Time')\r\n        \r\n\r\n        // x-axis label\r\n        svg.append('text')\r\n            .attr('x', canvasWidth / 2 + margin)\r\n            .attr('y', canvasHeight + margin * 1.7)\r\n            .attr('text-anchor', 'middle')\r\n            .text('Date')\r\n\r\n        // title\r\n        svg.append('text')\r\n            .attr('id', 'title')\r\n            .attr('x', canvasWidth / 2 + margin)\r\n            .attr('y', 40)\r\n            .attr('text-anchor', 'middle')\r\n            .text(this.props.title)\r\n            \r\n        var tooltip = d3.select(this.refs.canvas).append(\"div\")\r\n            .attr(\"class\", \"tooltip\")\r\n            .style(\"opacity\", \"0\")\r\n\r\n        const ids = [];\r\n\r\n        chart.selectAll()\r\n            .data(data).enter()\r\n            .append(\"circle\")\r\n            .attr('cx', (d, i) => xScale(d[0]) + xScale.bandwidth()/2)\r\n            .attr('cy', (d, i) => yScale(d[1]))\r\n            .attr('r', 5)\r\n            .attr('id', (d, i) => `p${i}`)\r\n            .attr('fill', (d, i) => this.props.colors[d[2]])\r\n            .attr('opacity', 0.8)\r\n            .on(\"mouseover\", (d, i) => {\r\n                this.setState({\r\n                    config: {\r\n                        mouseover: i\r\n                    }\r\n                })\r\n            });\r\n        \r\n        const config = { tooltip };\r\n\r\n        this.setState({ \r\n            svg, \r\n            chart,\r\n            config,\r\n        });\r\n    }\r\n\r\n    redrawChart = () => {\r\n        var size = this.getSize();\r\n        this.setState({width: size.width, height: size.height});\r\n        d3.select(`#${this.props.id}`).remove();\r\n        this.drawChart();\r\n    }\r\n\r\n    updateChart() {\r\n        const { chart, config } = this.state;\r\n        /**\r\n         * since componentDidUpdate can be called before drawChart is called,\r\n         * make sure that chart is defined before proceeding\r\n         */\r\n        if (chart) { \r\n            chart.selectAll(\"circle\")\r\n            .on(\"mouseover\", (d, i) => {\r\n                // increase the size of the point\r\n                chart.select(`#p${i}`)\r\n                    .transition()\r\n                    .duration(500)\r\n                    .attr(\"r\", 10);\r\n                \r\n                // show tooltip\r\n                this.tooltipMouseover(d[1], config.tooltip);\r\n            })\r\n            .on(\"mouseout\", (d, i) => {\r\n                // decrease the size of the point\r\n                chart.select(`#p${i}`)\r\n                    .transition()\r\n                    .duration(500)\r\n                    .attr(\"r\", 5);\r\n                \r\n                // hide tooltip\r\n                this.tooltipMouseout(d[1], config.tooltip);\r\n            });\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        this.updateChart();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={`graph-container ${this.props.id}`}>\r\n                <div ref=\"canvas\"></div>\r\n            </div> \r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport PDISurveyBar from '../graphs/PDISurveyBar';\r\nimport DateTimeScatter from '../graphs/DateTimeScatter';\r\nimport '../../css/DataView.css';\r\n\r\nexport default class DataView extends Component {\r\n    /**\r\n     * props should contain an object data with fields: allPDISurveys, dispenses, btn1, btn2, and btn3.\r\n     */\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            graph_id: 0,\r\n        }\r\n    }\r\n\r\n    graphs = [\"PDI Surveys, Dispenses, Button Presses\"];\r\n\r\n\r\n    onSelectChange = (e) => {\r\n        this.setState({\r\n            graph_id: e.target.value,\r\n        });\r\n    }\r\n\r\n    graphSelect() {\r\n        return (\r\n            <select onChange={this.onSelectChange}>\r\n                {this.graphs.map((name, i) => {\r\n                        if (i == this.state.graph_id)\r\n                            return <option selected=\"selected\" value={i}>{name}</option>\r\n                        return <option value={i}>{name}</option>\r\n                    })\r\n                }\r\n            </select>\r\n        )\r\n    }\r\n\r\n    displayGraphs() {\r\n        const { pdisurveys, dispenses, btn1, btn2, btn3 } = this.props.data;\r\n        if (pdisurveys && dispenses) {\r\n            return (\r\n                <div className=\"DataView\">\r\n                     <DateTimeScatter \r\n                        id=\"g0\"\r\n                        title=\"Dispenses\"\r\n                        data={[dispenses]}\r\n                        colors={[\"var(--medlock-blue)\"]}\r\n                    />\r\n                    <DateTimeScatter \r\n                        id=\"g1\"\r\n                        title=\"Button Presses\" \r\n                        data={[btn1, btn2, btn3]} \r\n                        colors={[\"red\", \"blue\", \"green\"]}\r\n                    />\r\n                    <PDISurveyBar id=\"g2\" data={pdisurveys} />\r\n                </div>\r\n            )\r\n        } else if (pdisurveys) {\r\n            return (\r\n                <div className=\"DataView\">\r\n                    <PDISurveyBar id=\"g0\" data={pdisurveys} />\r\n                </div>\r\n            )\r\n        } else if (dispenses) {\r\n            return (\r\n                <div className=\"DataView\">\r\n                     <DateTimeScatter \r\n                        id=\"g0\"\r\n                        title=\"Dispenses\"\r\n                        data={[dispenses]}\r\n                        colors={[\"var(--medlock-blue)\"]}\r\n                    />\r\n                    <DateTimeScatter \r\n                        id=\"g1\"\r\n                        title=\"Button Presses\" \r\n                        data={[btn1, btn2, btn3]} \r\n                        colors={[\"red\", \"blue\", \"green\"]}\r\n                    />\r\n                   \r\n                </div>\r\n            )\r\n        } else return ( <h2>There are no data at the moment.</h2> )\r\n    }\r\n\r\n    render() {\r\n        return this.displayGraphs();\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { fetchPDISurveys } from '../../actions/surveyActions'; \r\nimport { fetchDispenser } from '../../actions/dispenserActions';  \r\nimport '../../css/PatientData.css'; \r\nimport PDISurveyBar from '../graphs/PDISurveyBar';\r\nimport DateTimeScatter from '../graphs/DateTimeScatter';\r\nimport DataView from './DataView';\r\n\r\n/** \r\n * Component for displaying individual patient data\r\n * in the patient portal. \r\n */\r\n\r\nclass PatientData extends Component {\r\n\r\n    state = {\r\n        retrievedData: false\r\n    }\r\n\r\n    // Fetch Surveys and Dispenses data from database \r\n    componentWillMount() {\r\n        this.props.fetchPDISurveys(); \r\n        this.props.fetchDispenser(this.props.patient.medicalData.dispenser_id); \r\n    }\r\n\r\n    render() {        \r\n        const { allPDISurveys, \r\n                surveysLoading, \r\n                surveysLoaded,\r\n                surveyError, \r\n                dispenser, \r\n                dispenserLoading, \r\n                dispenserLoaded,\r\n                dispenserError } = this.props; \r\n\r\n        console.log(dispenser);\r\n\r\n        if(surveyError || dispenserError) {\r\n            return (\r\n                <div>\r\n                    <div>Survey Error: { surveyError ? surveyError.message : null}</div>\r\n                    <div>Dispense Error: {dispenserError ? dispenserError.message : null}</div>\r\n                </div>\r\n            ); \r\n        }\r\n\r\n        if(surveysLoading || dispenserLoading || !surveysLoaded || !dispenserLoaded) {\r\n            return (\r\n                <div>Loading . . . </div>\r\n            )\r\n        }\r\n\r\n        var data = {}\r\n        if (allPDISurveys) {\r\n            data = {\r\n                ...data,\r\n                pdisurveys: allPDISurveys,\r\n            }\r\n        }\r\n\r\n        if (dispenser) {\r\n            data = {\r\n                ...data,\r\n                dispenses: dispenser.events.dispenses,\r\n                btn1: dispenser.events.btn1,\r\n                btn2: dispenser.events.btn2,\r\n                btn3: dispenser.events.btn3,\r\n            }\r\n        }\r\n         \r\n        return (\r\n            <div className=\"pd-container\">\r\n                    <h1 className=\"pd-title\">\r\n                        My Data\r\n                    </h1>\r\n                <DataView data={data} />\r\n            </div>\r\n        );\r\n        \r\n    }\r\n}\r\n\r\nPatientData.propTypes = {\r\n    fetchPDISurveys: PropTypes.func.isRequired,\r\n    allPDISurveys: PropTypes.array.isRequired, \r\n    surveysLoading: PropTypes.bool.isRequired,\r\n    surveysLoaded: PropTypes.bool.isRequired,\r\n    surveyError: PropTypes.object,\r\n\r\n    fetchDispenser: PropTypes.func.isRequired, \r\n    dispenser: PropTypes.array.isRequired,\r\n    dispenserLoading: PropTypes.bool.isRequired,\r\n    dispenserLoaded: PropTypes.bool.isRequired,\r\n    dispenserError: PropTypes.object\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    allPDISurveys: state.surveyState.responses, \r\n    surveysLoading: state.surveyState.surveysLoading,\r\n    surveysLoaded: state.surveyState.surveysLoaded,\r\n    surveyError: state.surveyState.error,  \r\n    dispenser: state.dispenseState.dispenser, \r\n    dispenserLoading: state.dispenseState.dispenserLoading,\r\n    dispenserLoaded: state.dispenseState.dispenserLoaded,\r\n    dispenserError: state.dispenseState.error \r\n\r\n});\r\n\r\nexport default connect(mapStateToProps, { fetchPDISurveys, fetchDispenser })(PatientData);\r\n\r\n","import React, { Component } from 'react'; \r\nimport { connect } from 'react-redux'; \r\nimport { submitSurvey } from '../../actions/surveyActions'; \r\nimport PropTypes from 'prop-types';\r\n\r\nclass PDISurvey extends Component { \r\n\r\n    state = {\r\n        responses: [],\r\n    }; \r\n\r\n    // State contains the value of the updated UI Element. \r\n    onChange = (e) => {\r\n\r\n        let newResponses = [...this.state.responses]; \r\n        newResponses[e.target.id] = {\r\n            question: e.target.name, \r\n            answer: e.target.value \r\n        }\r\n\r\n        this.setState({\r\n            responses: newResponses \r\n        }); \r\n    }\r\n\r\n    // Submit the UI Element values in the local state to the action. \r\n    onSubmit = (e) => {\r\n        e.preventDefault(); \r\n\r\n        const responses = [\r\n            ...this.state.responses \r\n        ]\r\n\r\n        console.log(responses);\r\n        this.props.submitSurvey(responses); \r\n    }\r\n\r\n    render() {\r\n        const { surveyResponse, loading, error } = this.props;\r\n        \r\n        if (error) {\r\n            return (\r\n                <div>Error: {error.message}</div>\r\n            )\r\n        }\r\n        \r\n        if (loading) {\r\n            return (\r\n                <div>Loading . . .</div>\r\n            )\r\n        }\r\n\r\n        if (surveyResponse) {\r\n            return (\r\n                <div>Your response has been recorded. Thank you.</div>\r\n            )\r\n        }\r\n\r\n\r\n        return (\r\n            <div style={{marginBottom: '50px', marginLeft: '20px'}}>\r\n                <h1>Pain Disability Survey </h1>\r\n                <p>This survey evaluates how much pain affects various aspects of your life. </p>\r\n                <p>A score of 0 indicates that pain does not affect this aspect of your life. </p> \r\n                <p>A score of 10 indicates that the pain severly affects this aspect of your life negatively. </p>\r\n                <p>Leave the question blank if it is not applicable. </p>\r\n                <form onSubmit={this.onSubmit}>\r\n                    {\r\n                        questions.map(question => {\r\n                            return (\r\n                                <div>\r\n                                    <h3>How does pain affect your {question.subject}?</h3>   \r\n                                    <p>{question.description}</p> \r\n                                    <input type=\"number\" \r\n                                            name={question.subject}\r\n                                            onChange={this.onChange}\r\n                                            id={question.id}/>\r\n                                </div>\r\n\r\n                            ); \r\n                        })\r\n                    }\r\n                    <button type=\"submit\" style={{marginTop: '20px'}}>Submit</button>\r\n                </form>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n} \r\n\r\n// Change to pull from database. \r\nconst questions = [\r\n    {   \r\n        id: 0, \r\n        subject: 'family', \r\n        description: 'This category refers to activities of the home or family. It includes chores or duties performed around the house (e.g. yard work) and errands or favors for other family members (e.g. driving the children to school).'\r\n    }, \r\n    {   \r\n        id: 1,  \r\n        subject: 'recreation', \r\n        description: 'This disability includes hobbies, sports, and other similar leisure time activities.' \r\n    }, \r\n    {   \r\n        id: 2, \r\n        subject: 'social activity', \r\n        description: 'This category refers to activities, which involve participation with friends and acquaintances other than family members. It includes parties, theater, concerts, dining out, and other social functions.'\r\n    }, \r\n    {\r\n        id: 3, \r\n        subject: 'occupation', \r\n        description: 'This category refers to activities that are part of or directly related to ones job. This includes non-paying jobs as well, such as that of a housewife or volunteer.'\r\n    }, \r\n    {\r\n        id: 4, \r\n        subject: 'sexual behavior', \r\n        description: 'This category refers to the frequency and quality of ones sex life.'\r\n    }, \r\n    {\r\n        id: 5, \r\n        subject: 'self care', \r\n        description: 'This category includes activities, which involve personal maintenance and independent daily living (e.g. taking a shower, driving, getting dressed, etc.)'\r\n    }, \r\n    {\r\n        id: 6, \r\n        subject: 'life support activities', \r\n        description: 'This category refers to basic life supporting behaviors such as eating, sleeping and breathing.'\r\n    }\r\n]; \r\n\r\nPDISurvey.propTypes = {\r\n    submitSurvey: PropTypes.func.isRequired,\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    surveyResponse: state.surveyState.surveyResponse,\r\n    loading: state.surveyState.loading, \r\n    error: state.surveyState.error \r\n});\r\n\r\nexport default connect(mapStateToProps, { submitSurvey })(PDISurvey); \r\n","import React, { Component } from 'react'; \r\nimport auth0client from '../../auth/Auth';\r\nconst axios = require('axios'); \r\n\r\nclass Dispenser extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(props);\r\n        this.state = {\r\n            id: props.profile.medicalData.dispenser_id,\r\n        }\r\n    }\r\n    \r\n    onChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value  \r\n        })\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault(); \r\n\r\n        const dispenseTime = new Date(); \r\n        dispenseTime.setFullYear(parseInt(this.state.date.substring(6, 10))); \r\n        dispenseTime.setMonth(parseInt(this.state.date.substring(0, 2)) - 1); \r\n        dispenseTime.setDate(parseInt(this.state.date.substring(3, 5))); \r\n        dispenseTime.setUTCHours(parseInt(this.state.time.substring(0, 2)) + 4); \r\n        dispenseTime.setMinutes(parseInt(this.state.time.substring(3, 5))); \r\n\r\n        console.log(dispenseTime.toString()); \r\n    \r\n        const dispenseSeconds = dispenseTime.getTime(); \r\n\r\n        console.log(dispenseSeconds); \r\n        console.log(dispenseTime); \r\n\r\n        const data = {\r\n            id: this.state.id, \r\n            timestamp: dispenseSeconds \r\n        }\r\n\r\n        const { getAccessToken } = auth0client;\r\n        const API_URL = 'http://localhost:5000/api';\r\n        const headers = { 'Authorization': `Bearer ${getAccessToken()}`}; \r\n        \r\n        axios.post(`${API_URL}/dispense`, data, { headers }) \r\n            .then(res => {\r\n                console.log(res); \r\n            }) \r\n            .catch(err => console.log(err)); \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.onSubmit}>\r\n                    <input type=\"text\" \r\n                            name=\"date\"\r\n                            placeholder=\"mm/dd/yy\"\r\n                            onChange={this.onChange}/>\r\n                    <input type=\"text\" \r\n                            name=\"time\"\r\n                            placeholder=\"hh:mm military time\"\r\n                            onChange={this.onChange}/>\r\n                    <button type=\"submit\">Submit</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Dispenser; ","import React, { Component } from 'react'; \r\nimport auth0client from '../../auth/Auth'; \r\n\r\nconst axios = require('axios'); \r\n\r\nclass ServerEndpoints extends Component {\r\n\r\n\r\n    testEndpoint = () => {\r\n        \r\n        const { getAccessToken } = auth0client; \r\n        const headers = { 'Authorization': `Bearer ${getAccessToken()}`}; \r\n\r\n        axios.get('http://localhost:5000/api/provider/patients', { headers }) \r\n            .then(res => console.log(res)); \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>This page tests Server Endpoints. </h1>\r\n                <button onClick={this.testEndpoint}>Test Endpoint. </button>\r\n            </div>\r\n        )\r\n    }\r\n} \r\nexport default ServerEndpoints; ","import React, { Component } from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport '../../css/PatientListItem.css';\r\n\r\nexport default class PatientListItem extends Component {\r\n\r\n    render() {\r\n        const { patient, viewPatient, deletePatient } = this.props;\r\n\r\n        return (\r\n            <div className=\"PatientListItem-container\">\r\n                \r\n                <div>\r\n                    <h4>{patient.personalData.name}</h4>\r\n                </div>\r\n                \r\n                <div>\r\n                    <Button onClick={() => viewPatient(patient)}>View</Button>\r\n                    <Button onClick={() => deletePatient(patient._id)}>Delete</Button>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Form, FormGroup, Label, Input, Button } from 'reactstrap';\r\n\r\n\r\nexport default class AddPatient extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: null, \r\n            email: null \r\n        };\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            [e.target.name] : e.target.value\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Form>\r\n                    <FormGroup>\r\n                        <br></br>\r\n                        <Label for=\"patient-name\" className=\"form-heading\">Name</Label>\r\n                        <Input type=\"text\" name=\"name\" id=\"patient-name\" \r\n                                placeholder=\"Jon Snow\" \r\n                                value={this.state.name} \r\n                                onChange={this.onChange} />\r\n                        <Label for=\"patient-email\" className=\"form-heading\">Email</Label>\r\n                        <Input type=\"email\" name=\"email\" id=\"patient-email\" \r\n                                placeholder=\"jon.snow@nightswatch.org\" \r\n                                value={this.state.email} \r\n                                onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <Button onClick={() => this.props.onSubmit(this.state.name, this.state.email)} id = \"register\">Register</Button>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport PatientListItem from './PatientListItem';\r\nimport '../../css/PatientList.css';\r\n\r\nclass PatientList extends Component {\r\n\r\n    patientHTML = (patients) => {\r\n        return patients.map(patient => (\r\n            <PatientListItem \r\n                className=\"listItem\" \r\n                patient={patient} \r\n                deletePatient={this.props.deletePatient} \r\n                viewPatient={this.props.onClickPatient} \r\n            />\r\n        ));\r\n    }\r\n\r\n    render() {\r\n        console.log(this.props);\r\n        return (\r\n            <div>\r\n                <h3>My Patients</h3>\r\n                <div className=\"PatientList-container\">{this.patientHTML(this.props.patients)}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PatientList; \r\n","import {\r\n  CREATE_PATIENT_PROFILE_BEGIN,\r\n  CREATE_PATIENT_PROFILE_SUCCESS,\r\n  CREATE_PATIENT_PROFILE_FAILURE,\r\n\r\n  ADD_PATIENT_BEGIN,\r\n  ADD_PATIENT_SUCCESS,\r\n  ADD_PATIENT_FAILURE,\r\n\r\n  REMOVE_PATIENT_BEGIN,\r\n  REMOVE_PATIENT_SUCCESS,\r\n  REMOVE_PATIENT_FAILURE,\r\n\r\n  FETCH_PATIENTS_BEGIN,\r\n  FETCH_PATIENTS_SUCCESS,\r\n  FETCH_PATIENTS_FAILURE,\r\n\r\n  DELETE_ALL_PATIENTS_BEGIN,\r\n  DELETE_ALL_PATIENTS_SUCCESS,\r\n  DELETE_ALL_PATIENTS_FAILURE,\r\n\r\n  DELETE_PATIENT_BEGIN,\r\n  DELETE_PATIENT_SUCCESS,\r\n  DELETE_PATIENT_FAILURE,\r\n\r\n  FETCH_ALL_PATIENTS_BEGIN,\r\n  FETCH_ALL_PATIENTS_SUCCESS,\r\n  FETCH_ALL_PATIENTS_FAILURE,\r\n\r\n} from './types';\r\n\r\nimport axios from 'axios';\r\nimport auth0client from '../auth/Auth';\r\nimport { MEDLOCK_API, MEDLOCK_AUTH0 } from '../config/servers';\r\nimport { fetchAMT } from '../auth/AuthManagement';\r\n\r\nconst createPatientProfileBegin = () => ({\r\n  type: CREATE_PATIENT_PROFILE_BEGIN\r\n});\r\n\r\nconst createPatientProfileSuccess = patient => ({\r\n  type: CREATE_PATIENT_PROFILE_SUCCESS,\r\n  payload: {\r\n    patient\r\n  }\r\n});\r\n\r\nconst createPatientProfileFailure = error => ({\r\n  type: CREATE_PATIENT_PROFILE_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\n\r\n// naming convention ???\r\nexport function createPatientProfile(newProfile) {\r\n  const {\r\n    getAccessToken\r\n  } = auth0client;\r\n  let API_URL = `${MEDLOCK_API}/provider/patients`;\r\n  const headers = {\r\n    'Authorization': `Bearer ${getAccessToken()}`\r\n  };\r\n\r\n  return dispatch => {\r\n    dispatch(createPatientProfileBegin());\r\n    return axios.post(API_URL, newProfile, {\r\n        headers\r\n      })\r\n      .then(res => {\r\n        console.log(res.data);\r\n        dispatch(createPatientProfileSuccess(res.data));\r\n      })\r\n      .catch(error => dispatch(createPatientProfileFailure(error)));\r\n  }\r\n}\r\n\r\nconst addPatientBegin = () => ({\r\n  type: ADD_PATIENT_BEGIN\r\n});\r\n\r\n\r\nconst addPatientSuccess = allPatients => ({\r\n  type: ADD_PATIENT_SUCCESS,\r\n  payload: {\r\n    allPatients\r\n  }\r\n});\r\n\r\nconst addPatientFailure = error => ({\r\n  type: ADD_PATIENT_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\nexport function addPatientToProviderList(patient) {\r\n  const {\r\n    getAccessToken\r\n  } = auth0client;\r\n  const API_URL = `${MEDLOCK_API}/provider/patients`;\r\n  const headers = {\r\n    'Authorization': `Bearer ${getAccessToken()}`\r\n  };\r\n\r\n  return dispatch => {\r\n    dispatch(addPatientBegin());\r\n    return axios.post(API_URL, patient, {\r\n        headers\r\n      })\r\n      .then(res => dispatch(addPatientSuccess(res.data)))\r\n      .catch(error => {\r\n        console.log(error);\r\n        dispatch(addPatientFailure(error));\r\n      });\r\n  }\r\n}\r\n\r\nconst removePatientBegin = () => ({\r\n  type: REMOVE_PATIENT_BEGIN\r\n});\r\n\r\nconst removePatientSuccess = patient => ({\r\n  type: REMOVE_PATIENT_SUCCESS,\r\n  payload: {\r\n    patient\r\n  }\r\n});\r\n\r\nconst removePatientFailure = error => ({\r\n  type: REMOVE_PATIENT_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\nexport function removePatient(id) {\r\n  console.log(`remove patient id=${id}`);\r\n  \r\n  const { getAccessToken } = auth0client;\r\n  const API_URL = `${MEDLOCK_API}/provider/patients`;\r\n  const headers = { 'Authorization': `Bearer ${getAccessToken()}` };\r\n\r\n\r\n  return dispatch => {\r\n    dispatch(removePatientBegin());\r\n    return axios.delete(API_URL, { \r\n      headers, \r\n      data: {\r\n        providerId: auth0client.getProfile().sub.substring(6),\r\n        patientId: id,\r\n      }\r\n    })\r\n      .then(res => {\r\n        console.log(res.data);\r\n        dispatch(removePatientSuccess(res.data));\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        dispatch(removePatientFailure(err));\r\n      });\r\n  }\r\n}\r\n\r\nconst fetchPatientsBegin = () => ({\r\n  type: FETCH_PATIENTS_BEGIN\r\n});\r\n\r\nconst fetchPatientsSuccess = patients => ({\r\n  type: FETCH_PATIENTS_SUCCESS,\r\n  payload: {\r\n    patients\r\n  }\r\n});\r\n\r\nconst fetchPatientsError = error => ({\r\n  type: FETCH_PATIENTS_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\nexport function fetchPatients() {\r\n  const {\r\n    getAccessToken\r\n  } = auth0client;\r\n  const API_URL = `${MEDLOCK_API}/provider/patients`;\r\n  const headers = {\r\n    'Authorization': `Bearer ${getAccessToken()}`\r\n  };\r\n\r\n  return dispatch => {\r\n    dispatch(fetchPatientsBegin());\r\n    return axios.get(API_URL, {\r\n        headers\r\n      })\r\n      .then(res => {\r\n        console.log(res.data);\r\n        dispatch(fetchPatientsSuccess(res.data));\r\n      })\r\n      .catch(error => dispatch(fetchPatientsError(error)));\r\n  };\r\n}\r\n\r\nconst deletePatientBegin = () => ({\r\n  type: DELETE_PATIENT_BEGIN,\r\n})\r\n\r\nconst deletePatientSuccess = (patients) => ({\r\n  type: DELETE_PATIENT_SUCCESS,\r\n  payload: {\r\n    patients\r\n  }\r\n})\r\n\r\nconst deletePatientError = (error) => ({\r\n  type: DELETE_PATIENT_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n})\r\n\r\nexport function deletePatient(ids) {\r\n  var url = `${MEDLOCK_API}/admin/patient`;\r\n\r\n  return dispatch => {\r\n    dispatch(deletePatientBegin());\r\n    fetchAMT()\r\n      .then(res => {\r\n        const AMT = res.data.access_token;\r\n        return axios.delete(url, {\r\n          data: {\r\n            AMT, \r\n            ids,\r\n          }\r\n        })\r\n          .then(res => dispatch(deletePatientSuccess(res.data)))\r\n          .catch(err => dispatch(deletePatientError(err)));\r\n      })\r\n  }\r\n}\r\n\r\n// const deleteAllPatientsBegin = () => ({\r\n//   type: DELETE_ALL_PATIENTS_BEGIN\r\n// });\r\n\r\n// const deleteAllPatientsSuccess = (patients) => ({\r\n//   type: DELETE_ALL_PATIENTS_SUCCESS,\r\n//   payload: {\r\n//     patients\r\n//   }\r\n// });\r\n\r\n// const deleteAllPatientsError = (error) => ({\r\n//   type: DELETE_ALL_PATIENTS_FAILURE,\r\n//   payload: {\r\n//     error\r\n//   }\r\n// });\r\n\r\n// export function deleteAllPatients() {\r\n//   const {\r\n//     getAccessToken\r\n//   } = auth0client;\r\n//   const API_URL = `${MEDLOCK_API}/admin/patient?_id=$0&deleteAll=true`;\r\n//   const headers = {\r\n//     'Authorization': `Bearer ${getAccessToken()}`\r\n//   };\r\n\r\n//   return dispatch => {\r\n//     dispatch(deleteAllPatientsBegin());\r\n//     return axios.delete(API_URL, { headers })\r\n//       .then(res => {\r\n//         console.log(res);\r\n//         dispatch(deleteAllPatientsSuccess(res));\r\n//       })\r\n//       .catch(err => {\r\n//         dispatch(deleteAllPatientsError(err));\r\n//       });\r\n//   }\r\n// }\r\n\r\nconst fetchAllPatientsBegin = () => ({\r\n  type: FETCH_ALL_PATIENTS_BEGIN\r\n});\r\n\r\nconst fetchAllPatientsSuccess = patients => ({\r\n  type: FETCH_ALL_PATIENTS_SUCCESS,\r\n  payload: {\r\n    patients\r\n  }\r\n});\r\n\r\nconst fetchAllPatientsFailure = error => ({\r\n  type: FETCH_ALL_PATIENTS_FAILURE,\r\n  payload: {\r\n    error\r\n  }\r\n});\r\n\r\nexport function fetchAllPatients() {\r\n  console.log(\"FETCHING ALL PATIENTS!!!\");\r\n  const API_URL = `${MEDLOCK_API}/admin/patient`;\r\n  console.log(API_URL);\r\n  \r\n  return dispatch => {\r\n    dispatch(fetchAllPatientsBegin());\r\n    return axios.get(API_URL)\r\n      .then(res => dispatch(fetchAllPatientsSuccess(res.data)))\r\n      .catch(err => dispatch(fetchAllPatientsFailure(err)));\r\n  }\r\n\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport PersonalDataView from './PersonalDataView';\r\nimport { connect } from 'react-redux';\r\nimport { fetchDispenser } from '../../actions/dispenserActions';  \r\nimport DataView from '../patientData/DataView';\r\nimport PropTypes from 'prop-types';\r\nimport '../../css/PatientView.css';\r\n\r\nclass PatientView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchDispenser(this.props.patient.medicalData.dispenser_id); \r\n    }\r\n\r\n    render() {\r\n\r\n        const { patient,\r\n                dispenser, \r\n                dispenserLoading, \r\n                dispenserLoaded,\r\n                dispenserError } = this.props; \r\n\r\n        const { pdiSurveys } = patient.medicalData.surveys;\r\n\r\n        if(dispenserError) {\r\n            return (\r\n                <div>\r\n                    <div>Dispense Error: {dispenserError.message}</div>\r\n                </div>\r\n            ); \r\n        }\r\n\r\n        if(dispenserLoading || !dispenserLoaded) {\r\n            return (\r\n                <div>Loading . . . </div>\r\n            )\r\n        }\r\n\r\n        if (!dispenserLoading && dispenserLoaded && !dispenser) {\r\n            return (\r\n                <div>This patient doesn't yet have a dispenser.</div>\r\n            )\r\n        }\r\n\r\n        var data = {}\r\n        if (pdiSurveys) {\r\n            data = {\r\n                ...data,\r\n                pdisurveys: pdiSurveys,\r\n            }\r\n        }\r\n\r\n        if (dispenser) {\r\n            data = {\r\n                ...data,\r\n                dispenses: dispenser.events.dispenses,\r\n                btn1: dispenser.events.btn1,\r\n                btn2: dispenser.events.btn2,\r\n                btn3: dispenser.events.btn3,\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className=\"patientView-container\">\r\n                <PersonalDataView personalData={patient.personalData} />\r\n                <DataView data={data}\r\n                />\r\n                {/* <div className=\"leftPanel\">\r\n                    <PersonalDataView personalData={patient.personalData} />\r\n                    <ConsumptionDataView medicalData={patient.medicalData} data={{pdiSurveys, dispenses}}/>\r\n                </div>\r\n                <div className=\"rightPanel\">\r\n                    <MedicalDataView medicalData={patient.medicalData} data={{pdiSurveys, dispenses}} />\r\n                </div> */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nPatientView.propTypes = {\r\n    fetchDispenser: PropTypes.func.isRequired, \r\n    dispenser: PropTypes.object.isRequired,\r\n    dispenserLoading: PropTypes.bool.isRequired,\r\n    dispenserLoaded: PropTypes.bool.isRequired,\r\n    dispenserError: PropTypes.object\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    dispenser: state.dispenseState.dispenser, \r\n    dispenserLoading: state.dispenseState.dispenserLoading,\r\n    dispenserLoaded: state.dispenseState.dispenserLoaded,\r\n    dispenserError: state.dispenseState.error \r\n})\r\n\r\nexport default connect(mapStateToProps, { fetchDispenser })(PatientView);\r\n","import React, { Component } from 'react';\r\nimport { Button, Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\r\nimport '../../css/UserListItem.css';\r\n\r\nexport default class UserListItem extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dropdownOpen: false,\r\n        }\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState(prevState => ({\r\n            dropdownOpen: !prevState.dropdownOpen\r\n        }));\r\n    }\r\n\r\n    render() {\r\n        const { user, viewUser, deleteUser } = this.props;\r\n        console.log(\"USER:\");\r\n        console.log(user);\r\n        return (\r\n            <div className=\"UserListItem\" onClick={() => viewUser(user)}>\r\n                <div className=\"UserListItem-userInfo\">\r\n                    <div>\r\n                        <h4>{user.personalData.name}</h4>\r\n                    </div>\r\n                    <div>\r\n                        <h6 id=\"userid\">id={user._id}</h6>\r\n                    </div>\r\n                </div>\r\n                <div className=\"UserListItem-options\">\r\n                    <button onClick={() => viewUser(user)}>View</button>\r\n                    <button>Edit</button>\r\n                    <button onClick={() => deleteUser(user._id)}>Delete</button>\r\n                    {/* <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggle}>\r\n                        <DropdownToggle>...</DropdownToggle>\r\n                        <DropdownMenu>\r\n                            <DropdownItem onClick={() => viewUser(user)}>View</DropdownItem>\r\n                            <DropdownItem disabled>Edit</DropdownItem>\r\n                            <DropdownItem onClick={() => deleteUser(user._id)}>Delete</DropdownItem>\r\n                        </DropdownMenu>\r\n                    </Dropdown> */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport SearchField from 'react-search-field';\r\nimport UserListItem from './UserListItem';\r\nimport '../../css/UserList.css';\r\n\r\nexport default class UserList extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            displayedUsers: this.props.users,\r\n        }\r\n    }\r\n    \r\n    userHTML = (users) => {\r\n        return this.state.displayedUsers.map(user => (\r\n            <UserListItem \r\n                className=\"listItem\"\r\n                user={user}\r\n                deleteUser={this.props.deleteUser}\r\n                viewUser={this.props.viewUser}\r\n            />\r\n        ));\r\n    }\r\n\r\n    onSearchChange = (value, e) => {\r\n        e.preventDefault();\r\n        const searchResults = this.props.users.filter(user => {\r\n            return (\r\n                (user.personalData.name.substring(0, value.length) === value) || \r\n                (user._id.substring(0, value.length) === value) ||\r\n                (user.personalData.email.substring(0, value.length) === value)\r\n            );\r\n        });\r\n        this.setState({ displayedUsers: searchResults });\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div className=\"UserList\">\r\n                <div className=\"UserList-header\">\r\n                    <h3>{this.props.title}</h3>\r\n                    <div className=\"UserList-ControlPanel\">\r\n                        <div className=\"left\">\r\n                            <button onClick={() => this.props.createNew()}>Create New</button>\r\n                            <button onClick={() => this.props.deleteAll()}>Delete All</button>\r\n                        </div>\r\n                        <div className=\"right\">\r\n                            <SearchField\r\n                                onChange={this.onSearchChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"Users-container\">{this.userHTML(this.props.users)}</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PatientList from './PatientList';\r\nimport AddPatientForm from './AddPatientForm';\r\nimport { fetchAMT, getUserByEmail } from '../../auth/AuthManagement'; \r\nimport { auth0Registration, assignRoles } from '../../actions/authActions';\r\nimport { createPatientProfile, addPatientToProviderList, removePatient, fetchPatients, deletePatient } from '../../actions/patientActions'; \r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { Button } from 'reactstrap';\r\nimport auth0client from '../../auth/Auth'; \r\nimport PatientView from '../patientView/PatientView';\r\nimport SearchField from 'react-search-field';\r\nimport UserList from '../users/UserList';\r\nimport { MEDLOCK_API } from '../../config/servers';\r\nimport '../../css/MyPatients.css';\r\n\r\n\r\nconst axios = require('axios'); \r\n\r\nclass MyPatients extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            newPatientForm: false,\r\n            onePatientView: false,\r\n            viewedPatient: null\r\n        }\r\n    }\r\n\r\n    viewPatient = (patient) => {\r\n        console.log(patient);\r\n        this.setState({\r\n            onePatientView: true,\r\n            viewedPatient: patient\r\n        });\r\n        this.props.history.push(\"/dashboard/mypatients/viewpatient\");\r\n    }\r\n\r\n    onRemovePatient = (patientId) => {\r\n        this.props.removePatient(patientId);\r\n    }\r\n\r\n    addPatient = () => {\r\n        this.setState({newPatientForm: true});\r\n    }\r\n\r\n    displayNewPatientForm = () => {\r\n        const { newPatientForm } = this.state;\r\n        if (newPatientForm) {\r\n            return (\r\n                <div>\r\n                    <AddPatientForm onSubmit={this.submitForm} />\r\n                </div>\r\n            );\r\n        }\r\n        \r\n        else {\r\n            return (\r\n                <div>\r\n                    <Button onClick={this.addPatient} id = \"register-patient\">Register Patient</Button>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    submitForm = (name, email) => {\r\n\r\n        const password = Math.random().toString(36).slice(-12); \r\n\r\n        const newPatient = {\r\n            \"name\": name, \r\n            \"email\": email,\r\n            \"password\": password,\r\n            \"connection\": \"Username-Password-Authentication\"\r\n        };\r\n            \r\n\r\n        fetchAMT() \r\n            .then(res => {\r\n\r\n                const AMT = res.data.access_token; \r\n\r\n                this.props.auth0Registration(newPatient, AMT)\r\n                .then(() => { \r\n                    alert(`Patient Succesfully Added`);\r\n                    this.createPatient(newPatient, AMT, this.props.userProfile.user_id);\r\n                })\r\n                .catch(error => {\r\n                    console.log(`User Registration Error: ${error}`); \r\n                    const errorString = `${error}`; \r\n                    console.log(errorString.includes(\"409\")); \r\n                    if(!errorString.includes(\"409\")) alert(`Failed To Add Patient. Error Code: ${error}`);\r\n                    \r\n                    if(errorString.includes(\"409\")) {\r\n                        getUserByEmail(email, AMT) \r\n                            .then(res => {\r\n                                const user_id = res.data[0].user_id; \r\n                                console.log(user_id); \r\n\r\n                                const newPatientProfile = {\r\n                                    _id: user_id.substring(6),\r\n                                    personalData: {\r\n                                        name: name,\r\n                                        email: email,\r\n                                    },\r\n                                    medicalData: {\r\n                                        providers: [auth0client.userProfile.sub.substring(6)]\r\n                                    }\r\n                                };\r\n                                this.props.createPatientProfile(newPatientProfile);\r\n                            })\r\n                            .then(() => {\r\n                                console.log(\"successful\");\r\n                                this.props.fetchPatients();\r\n                            })\r\n                    }\r\n                });\r\n            }) \r\n            .then((err) => {\r\n                this.props.fetchPatients();\r\n                if(err) console.log(err);\r\n            })\r\n            .catch(error => {alert(`Failed To Create Provider. Error Code: ${error}`); console.log(error);});\r\n\r\n        this.setState({ newPatientForm: false });\r\n    }\r\n\r\n    createPatient = (newPatient, AMT, patient_id) => {\r\n        console.log(\"Patient registered. Now creating profile . . . \"); \r\n        const newPatientProfile = {\r\n            _id: patient_id.substring(6),\r\n            personalData: {\r\n                name: newPatient.name,\r\n                email: newPatient.email,\r\n            },\r\n            medicalData: {\r\n                providers: [auth0client.userProfile.sub.substring(6)]\r\n            }\r\n        };\r\n\r\n        this.props.createPatientProfile(newPatientProfile)\r\n            .then(() => {\r\n                console.log(\"also successful!\");\r\n                this.props.fetchPatients();\r\n            });\r\n\r\n        this.props.assignRoles(patient_id, AMT, \"Patient\");\r\n\r\n        this.props.patients.push(newPatientProfile);\r\n\r\n        var url = `${MEDLOCK_API}/email`;\r\n        axios.post(url, newPatient); \r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchPatients();\r\n    }\r\n\r\n    render() {\r\n        console.log(\"DISPLAYED PATIENTS:\" + this.state.displayedPatients);\r\n        const { patientRegistering, registerError, patientsFetching, patientsFetched } = this.props;\r\n        //console.log(\"DISPLAYED PATIENTS AFTER SET EQUALS:\" + this.state.displayedPatients);\r\n    \r\n        if(registerError) {\r\n            return (\r\n                <div>\r\n                    <p>Register Error: {registerError ? registerError.message : null}</p>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (patientRegistering) {\r\n            return (\r\n                <div>\r\n                    Registering patient . . .\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (patientsFetching || !patientsFetched) {\r\n            return (\r\n                <div>\r\n                    Loading patients . . .\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (this.state.onePatientView) {\r\n            if (this.state.viewedPatient === null)\r\n                throw \"onePatientView is true, but viewedPatient is null!\";\r\n            \r\n            return (\r\n                 <PatientView patient={this.state.viewedPatient} />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"MyPatients\">\r\n                <UserList \r\n                    title=\"My Patients\"\r\n                    users={this.props.patients}\r\n                    viewUser={this.viewPatient}\r\n                    deleteUser={this.onRemovePatient}\r\n                />\r\n                {this.displayNewPatientForm()}\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nMyPatients.propTypes = {\r\n    patients: PropTypes.array.isRequired,\r\n    patient: PropTypes.object.isRequired,\r\n\r\n    registerPatient: PropTypes.func.isRequired,\r\n    patientRegistering: PropTypes.bool.isRequired,\r\n    registerError: PropTypes.object.isRequired,\r\n\r\n    createPatientProfile: PropTypes.func.isRequired,\r\n    assignPatientRole: PropTypes.func.isRequired,\r\n    fetchPatients: PropTypes.func.isRequired,\r\n    patientsFetching: PropTypes.bool.isRequired,\r\n    patientsFetched: PropTypes.bool.isRequired,\r\n    fetchPatientsError: PropTypes.object.isRequired,\r\n\r\n    removePatient: PropTypes.func.isRequired,\r\n    patientRemoving: PropTypes.bool.isRequired,\r\n    lastRemovedPatient: PropTypes.object.isRequired,\r\n    patientRemoveError: PropTypes.object\r\n\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    patients: state.patientState.patients,\r\n    patient: state.patientState.patient,\r\n\r\n    patientRegistering: state.patientState.patientLoading, \r\n    patientsFetching: state.patientState.patientsFetching,\r\n    patientsFetched: state.patientState.patientsFetched,\r\n    fetchPatientsError: state.patientState.fetchPatientsError,\r\n\r\n    registerError: state.providerState.registerError,\r\n    roleAssigning: state.providerState.roleAssigning,\r\n    roleAssignError: state.providerState.roleAssignError,\r\n\r\n    userProfile: state.authState.userProfile, \r\n    userProfileLoading: state.authState.userProfileLoading, \r\n    userProfileError: state.authState.userProfileError,\r\n\r\n    patientRemoving: state.patientState.patientRemoving,\r\n    lastRemovedPatient: state.patientState.lastRemovedPatient,\r\n    patientRemoveError: state.patientState.patientRemoveError,\r\n\r\n});\r\n\r\nexport default connect(\r\n    mapStateToProps, { \r\n        auth0Registration, \r\n        assignRoles, \r\n        createPatientProfile, \r\n        addPatientToProviderList,\r\n        fetchPatients,\r\n        removePatient,\r\n    })(MyPatients);\r\n","import React, { Component } from 'react'; \r\nimport { connect } from 'react-redux'; \r\nimport { saveProfile } from '../../actions/profileActions'; \r\nimport { resetPassword } from '../../auth/AuthManagement'; \r\nimport { Button, Form, FormGroup, Input, Label } from 'reactstrap';\r\nimport auth0client from '../../auth/Auth';\r\n\r\nclass NewUser extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(props);\r\n        this.state = {\r\n            personalData: {\r\n                ...props.profile.personalData,\r\n                sex: \"Other\",\r\n                address: {\r\n                    street: \"\",\r\n                    city: \"\",\r\n                    state: \"\",\r\n                    zip: \"\"\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    onSubmit = e => {\r\n        e.preventDefault(); \r\n        this.props.saveProfile(this.state.personalData, this.props.role); \r\n        \r\n        // Send Password Reset Email and Test Temporary Password Email \r\n        resetPassword(this.props.profile.personalData.email); \r\n        this.props.toggle(); \r\n    }\r\n\r\n    onChange = e => {\r\n        if (e.target.name === \"street\" || e.target.name === \"city\"   ||\r\n            e.target.name === \"state\"  || e.target.name === \"zip\") {\r\n            this.setState({\r\n                personalData: {\r\n                    ...this.state.personalData,\r\n                    address: {\r\n                        ...this.state.personalData.address,\r\n                        [e.target.name]: e.target.value\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({ \r\n                personalData: {\r\n                    ...this.state.personalData,\r\n                    [e.target.name]: e.target.value \r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Form>\r\n                    <FormGroup required>\r\n                        <Label for=\"pi-name\">Full Name</Label>\r\n                        <Input type=\"text\" name=\"name\" id=\"pi-name\" placeholder=\"Jon Snow\" value={this.state.personalData.name} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-sex\">Sex</Label>\r\n                        <Input type=\"select\" name=\"sex\" id=\"pi-sex\" value={this.state.personalData.sex} onChange={this.onChange}>\r\n                            <option>Male</option>\r\n                            <option>Female</option>\r\n                            <option>Other</option>\r\n                        </Input>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-dob\">Birthday</Label>\r\n                        <Input type=\"date\" name=\"birthday\" id=\"pi-dob\" value={this.state.personalData.birthday} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-addr\">Address</Label>\r\n                        <Input type=\"text\" name=\"street\" id=\"pi-addr\" placeholder=\"123 Direwolf Ave\" value={this.state.personalData.address.street} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-city\">City</Label>\r\n                        <Input type=\"text\" name=\"city\" id=\"pi-city\" placeholder=\"Winterfell\" value={this.state.personalData.address.city} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-state\">State</Label>\r\n                        <Input type=\"text\" name=\"state\" id=\"pi-state\" placeholder=\"The North\" value={this.state.personalData.address.state} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-zip\">Zip</Label>\r\n                        <Input type=\"text\" name=\"zip\" id=\"pi-zip\" placeholder=\"12345\" value={this.state.personalData.address.zip} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup required>\r\n                        <Label for=\"pi-email\">Email</Label>\r\n                        <Input type=\"email\" name=\"email\" id=\"pi-email\" placeholder=\"jon.snow@nightswatch.org\" value={this.state.personalData.email} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-phone\">Phone</Label>\r\n                        <Input type=\"text\" name=\"phone\" id=\"pi-phone\" placeholder=\"(555) 555-5555\" value={this.state.personalData.phone} onChange={this.onChange}  />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"pi-chatname\">Chat Name</Label>\r\n                        <Input type=\"text\" name=\"chatname\" id=\"pi-chatname\" placeholder=\"jsnow\" value={this.state.personalData.chatname} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <FormGroup required>\r\n                        <Label for=\"pi-bio\">Biography</Label>\r\n                        <Input type=\"textarea\" name=\"bio\" id=\"pi-bio\" placeholder=\"I lived one hell of a life (and death and life). Heir to the Iron Throne but raised as a bastard. I rode a dragon a couple times. Also, I had sex with my aunt, then killed her.\" value={this.state.personalData.bio} onChange={this.onChange} />\r\n                    </FormGroup>\r\n                    <Button onClick={this.onSubmit}>Save</Button>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n} \r\n\r\nconst mapStateToProps = state => ({\r\n    AMT: state.authState.AMT, \r\n    AMTLoading: state.authState.AMTLoading, \r\n    AMTError: state.authState.AMTError, \r\n});\r\n\r\nexport default connect(mapStateToProps, { saveProfile })(NewUser); ","import React, { Component } from 'react'; \r\nimport DashIcon from './DashIcon'; \r\nimport DispenserCode from './DispenserCode'; \r\nimport PropTypes from 'prop-types';\r\nimport '../../css/Dashboard.css';\r\nimport auth0client from '../../auth/Auth';\r\nimport { connect } from 'react-redux';\r\nimport Profile from '../profile/Profile';\r\nimport Resources from '../resources/Resources';\r\nimport Inbox from '../inbox/Inbox';\r\nimport { loadProfile } from '../../actions/profileActions'; \r\nimport { fetchRoles } from '../../actions/authActions';\r\nimport { fetchAMT } from '../../auth/AuthManagement'; \r\nimport SecuredRoute from '../SecuredRoute';\r\nimport DashHeader from './DashHeader';\r\nimport SideBar from '../nav/sidebar/SideBar';\r\nimport PatientData from '../patientData/PatientData';\r\nimport PDISurvey from '../survey/PDISurvey';\r\nimport Dispenser from '../test/Dispenser'; \r\nimport ServerEndpoints from '../test/ServerEndpoints'; \r\nimport { modules } from '../nav/ModuleInfo'; \r\nimport MyPatients from '../myPatients/MyPatients'; \r\nimport NewUser from './NewUser';\r\nimport { collapseSideBar, expandSideBar, setSideBarToggle } from '../../actions/sideBarActions'; \r\n\r\nclass Dashboard extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            profile: {},\r\n            role: null, \r\n            icons: modules, \r\n            newUser: false, \r\n            toggleCodeDisplay: false\r\n        }\r\n    }\r\n\r\n    displayDispenserCode = () => {\r\n        this.setState({\r\n            toggleCodeDisplay: true \r\n        }); \r\n    }\r\n\r\n    hideDispenserCode = () => {\r\n        this.setState({\r\n            toggleCodeDisplay: false \r\n        }); \r\n    }\r\n\r\n    autoCollapseSideBar = (query) => {\r\n        //not getting called at the right times\r\n        this.props.setSideBarToggle();\r\n        if (query.matches) {\r\n            this.props.collapseSideBar();\r\n        } else {\r\n            this.props.expandSideBar();\r\n        }\r\n    }\r\n\r\n    toggleSideBar = () => {\r\n        if (this.props.sideBarCollapsed) {\r\n            this.props.expandSideBar();\r\n        } \r\n        else {\r\n            this.props.collapseSideBar(); \r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // media queries\r\n        var x = window.matchMedia(\"(max-width: 1024px)\");\r\n        this.autoCollapseSideBar(x);\r\n        x.addListener(this.autoCollapseSideBar);\r\n\r\n        const { userProfile } = auth0client;\r\n\r\n        // Fetch the API Management Token. \r\n        fetchAMT() \r\n            .then(res => { \r\n                const AMT = res.data.access_token; \r\n                console.log(`AMT: ${AMT}`);\r\n                this.props.fetchRoles(AMT) \r\n                    .then(() => {\r\n                        console.log(this.props);\r\n                        this.props.loadProfile(this.props.roles[0].name) \r\n                            .then(() => {\r\n                                console.log(this.props);\r\n                                // Need better method of verifying that this is a new patient. \r\n                                if(this.props.roles[0].name === 'Patient' && \r\n                                    !this.props.profile.personalData.bio) { \r\n                                        this.setState({ \r\n                                            newUser: true \r\n                                        });\r\n                                // Testing New Password \r\n                                } else {\r\n                                    console.log(userProfile); \r\n                                }\r\n                            });\r\n                    }); \r\n            }); \r\n    }\r\n\r\n    toggleNewUser = () => {\r\n        this.setState(prevState => {\r\n            return {\r\n                newUser: !prevState.newUser \r\n            }\r\n        })\r\n    }\r\n\r\n    dashboardContentStyle = () => {\r\n        var style;\r\n        if (this.props.sideBarCollapsed) {\r\n            style = {\r\n                'grid-column': '1/13',\r\n            }\r\n        } else {\r\n            style = {\r\n                'grid-column': '3/13',\r\n            }\r\n        }\r\n        return style;\r\n    }\r\n\r\n    render() {\r\n        const { profile, profileLoading, profileError, \r\n                roles, rolesLoading, rolesError } = this.props;\r\n\r\n        if(rolesError || profileError) {\r\n            return (\r\n                <div>\r\n                    <p>Profile Error: {profileError ? profileError.message : null}</p>\r\n                    <p>Roles Error: {rolesError ? rolesError.message : null}</p>\r\n                </div>\r\n            )\r\n        } \r\n\r\n        if(rolesLoading) {\r\n            return (\r\n                <div>\r\n                    Roles Loading . . . \r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (!profile) {\r\n            return (\r\n                <div>\r\n                    Profile Loading . . .\r\n                </div>\r\n            );\r\n        } \r\n\r\n        if(this.state.newUser) {\r\n            return (\r\n                <NewUser toggle={this.toggleNewUser} profile={this.props.profile} role={roles[0].name}/> \r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"Dashboard\">\r\n                {this.state.toggleCodeDisplay ? \r\n                    <div className=\"Grey-Layer\"></div> : null}\r\n                {this.state.toggleCodeDisplay ? \r\n                    <div className=\"DispenserCode-container\">\r\n                        <DispenserCode hideDispenserCode={this.hideDispenserCode}\r\n                                        userProfile={this.props.profile}/> \r\n                    </div> \r\n                    : null \r\n                }\r\n                \r\n                <div className=\"DashHeader-container\">\r\n                    <DashHeader\r\n                        name={this.props.profile.personalData.name}  \r\n                        toggleSideBar={this.toggleSideBar}\r\n                        sideBarCollapsed={this.props.sideBarCollapsed}\r\n                        sideBarToggle={this.props.sideBarToggle}\r\n                        displayDispenserCode={this.displayDispenserCode}\r\n                    />\r\n                </div>\r\n                <div className=\"SideBar-container\">\r\n                        <SideBar \r\n                            roles={this.props.roles} \r\n                            personalData={this.props.profile.personalData}\r\n                            toggle={this.toggleSideBar}\r\n                            togglable={this.sideBarToggle}\r\n                            collapsed={this.props.sideBarCollapsed}\r\n\r\n                />\r\n                </div>\r\n                <div className=\"Dashboard-content\" style={this.dashboardContentStyle()}>\r\n                    {\r\n                        this.props.location.pathname === \"/dashboard\" ? this.dashboardHTML() : this.makeMainRoutes(this.props)\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    iconHTML = (icons, roles) => {\r\n        try {\r\n            return icons.filter(icon => {\r\n                    if(!icon.roles) return false; \r\n                    \r\n                    for(let i = 0; i < icon.roles.length; i++) {\r\n                        if(icon.roles[i].name === roles[0].name) \r\n                            return true; \r\n                    }\r\n                    return false; \r\n                }). \r\n                map(icon => (\r\n                    <div className=\"DashIcon-container\">\r\n                        <DashIcon \r\n                            name={icon.name} \r\n                            id={icon.id}\r\n                            roles={icon.roles} \r\n                            content={icon.content} \r\n                            link={icon.link} \r\n                        />\r\n                    </div>\r\n                ))\r\n        } catch(error) { console.log(error); } \r\n\r\n        return (\r\n            <div>Loading . . . </div>\r\n        )\r\n    };\r\n\r\n    dashboardHTML = () => {\r\n        return (\r\n            <div className=\"DashIcons-container\">\r\n                {this.iconHTML(this.state.icons, this.props.roles)}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    makeMainRoutes = (props) => {\r\n        return (\r\n            <div className=\"SecuredRoutes-container\">\r\n                <SecuredRoute path=\"/dashboard/profile\" personalData={props.profile.personalData} component={Profile} />\r\n                <SecuredRoute path=\"/dashboard/inbox\" component={Inbox} />\r\n                <SecuredRoute path=\"/dashboard/mydata\" patient={props.profile} component={PatientData} />\r\n                <SecuredRoute path=\"/dashboard/resources\" component={Resources} />\r\n                <SecuredRoute path=\"/dashboard/survey\" component={PDISurvey} />\r\n                <SecuredRoute path=\"/dashboard/dispenser\" profile={props.profile} component={Dispenser} /> \r\n                <SecuredRoute path=\"/dashboard/serverendpoints\" component={ServerEndpoints} /> \r\n                <SecuredRoute path=\"/dashboard/mypatients\" component={MyPatients} />\r\n            </div>\r\n        );   \r\n    }  \r\n}\r\n\r\nDashboard.propTypes = {\r\n    profile: PropTypes.object.isRequired,\r\n    loadProfile: PropTypes.func.isRequired,\r\n    profileLoading: PropTypes.bool.isRequired,\r\n    profileLoaded: PropTypes.bool.isRequired, \r\n    profileError: PropTypes.string, \r\n\r\n    roles: PropTypes.object.isRequired, \r\n    fetchRoles: PropTypes.func.isRequired, \r\n    rolesLoading: PropTypes.bool.isRequired, \r\n    rolesError: PropTypes.string, \r\n\r\n    collapseSideBar: PropTypes.func.isRequired,\r\n    expandSideBar: PropTypes.func.isRequired,\r\n    setSideBarToggle: PropTypes.func.isRequired,\r\n    sideBarCollapsed: PropTypes.bool.isRequired,\r\n    sideBarToggle: PropTypes.bool.isRequired,\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    profile: state.profileState.profile,\r\n    profileLoading: state.profileState.profileLoading,\r\n    profileLoaded: state.profileState.profileLoaded,\r\n    profileError: state.profileState.profileError,\r\n\r\n    roles: state.authState.roles, \r\n    rolesLoading: state.authState.rolesLoading, \r\n    rolesError: state.authState.rolesError, \r\n\r\n    sideBarCollapsed: state.sideBarState.collapsed,\r\n    sideBarToggle: state.sideBarState.toggle,\r\n});\r\n\r\nexport default connect(mapStateToProps, { \r\n    loadProfile, \r\n    fetchRoles, \r\n    collapseSideBar, \r\n    expandSideBar, \r\n    setSideBarToggle \r\n})(Dashboard); \r\n","import { \r\n    COLLAPSE_SIDEBAR, \r\n    EXPAND_SIDEBAR,\r\n    SET_SIDEBAR_TOGGLE,\r\n} from './types';\r\n\r\nexport function collapseSideBar() {\r\n    return dispatch => dispatch({ type: COLLAPSE_SIDEBAR });\r\n}\r\n\r\nexport function expandSideBar() {\r\n    return dispatch => dispatch({ type: EXPAND_SIDEBAR });\r\n}\r\n\r\nexport function setSideBarToggle() {\r\n    return dispatch => dispatch({ type: SET_SIDEBAR_TOGGLE });\r\n}\r\n\r\n","import React, { Component } from 'react';\r\n\r\nclass Callback extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <img src={''} alt=\"loading\" />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Callback;\r\n","import React, { Component } from 'react';\r\n\r\nclass Home extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                Home\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport bigLogo from '../../icons/white-logo.png'; \r\nimport auth0client from '../../auth/Auth';\r\nimport '../../css/Login.css';\r\nimport {Helmet} from 'react-helmet';\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    render() {\r\n        return (\r\n                <div>\r\n                    <Helmet>\r\n                        <style>{'body { background-color: var(--medlock-blue); overflow: hidden }'}</style>\r\n                    </Helmet>\r\n                    <div id=\"login-logo\">\r\n                        <img className=\"login-logo\" src={bigLogo} />\r\n                    </div>\r\n                    <Button onClick={auth0client.login} id=\"login-button\">Login</Button>\r\n                </div>\r\n        );\r\n    }\r\n} \r\n\r\n\r\nexport default Login; ","import {\r\n    CREATE_PROVIDER_PROFILE_BEGIN, \r\n    CREATE_PROVIDER_PROFILE_SUCCESS, \r\n    CREATE_PROVIDER_PROFILE_FAILURE, \r\n\r\n    FETCH_ALL_PROVIDERS_BEGIN,\r\n    FETCH_ALL_PROVIDERS_SUCCESS,\r\n    FETCH_ALL_PROVIDERS_FAILURE,\r\n\r\n    DELETE_PROVIDER_BEGIN,\r\n    DELETE_PROVIDER_SUCCESS,\r\n    DELETE_PROVIDER_FAILURE,\r\n\r\n} from './types';\r\n\r\nimport axios from 'axios';\r\nimport auth0client from '../auth/Auth'; \r\nimport { MEDLOCK_API } from '../config/servers';\r\nimport { fetchAMT } from '../auth/AuthManagement';\r\n\r\nconst createProviderProfileBegin = () => ({\r\n    type: CREATE_PROVIDER_PROFILE_BEGIN\r\n});\r\n\r\nconst createProviderProfileSuccess = provider => ({\r\n    type: CREATE_PROVIDER_PROFILE_SUCCESS,\r\n    payload: {\r\n        provider\r\n    }\r\n});\r\n\r\nconst createProviderProfileFailure = error => ({\r\n    type: CREATE_PROVIDER_PROFILE_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\n// If Administrator creates provider, different than if a provider creates a provider. \r\n// Adminstrators may create physicians, physicians may create nurses, caretakers, and others. \r\nexport function createProviderProfile(newProfile, creatorScope) {\r\n    const { getAccessToken } = auth0client;\r\n    let API_URL = \"\"; \r\n    \r\n    switch(creatorScope) {\r\n        case \"Admin\": \r\n            API_URL = `${MEDLOCK_API}/admin/provider`; \r\n            break; \r\n        case \"Provider\": \r\n            API_URL = `${MEDLOCK_API}/provider`; \r\n            break; \r\n        default: \r\n            API_URL = `${MEDLOCK_API}/provider`; \r\n    }\r\n\r\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`};\r\n    return dispatch => {\r\n        dispatch(createProviderProfileBegin());\r\n        return axios.post(API_URL, newProfile, { headers })\r\n            .then(res => {alert(`Provider Added Successfully`); dispatch(createProviderProfileSuccess(res.data))})\r\n            .catch(error => {alert(`Failed To Create Provider. Error Code: ${error}`); dispatch(createProviderProfileFailure(error))});\r\n    }\r\n}\r\n\r\nconst fetchAllProvidersBegin = () => ({\r\n    type: FETCH_ALL_PROVIDERS_BEGIN\r\n  });\r\n  \r\nconst fetchAllProvidersSuccess = providers => ({\r\n    type: FETCH_ALL_PROVIDERS_SUCCESS,\r\n    payload: {\r\n        providers\r\n    }\r\n});\r\n\r\nconst fetchAllProvidersFailure = error => ({\r\n    type: FETCH_ALL_PROVIDERS_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\nexport function fetchAllProviders() {\r\n    console.log(\"FETCHING PROVIDERS\");\r\n    const API_URL = `${MEDLOCK_API}/admin/provider`;\r\n\r\n    return dispatch => {\r\n        dispatch(fetchAllProvidersBegin());\r\n        return axios.get(API_URL)\r\n            .then(res => dispatch(fetchAllProvidersSuccess(res.data)))\r\n            .catch(err => dispatch(fetchAllProvidersFailure(err)));\r\n    }\r\n}\r\n\r\nconst deleteProviderBegin = () => ({\r\n    type: DELETE_PROVIDER_BEGIN\r\n});\r\n\r\nconst deleteProviderSuccess = providers => ({\r\n    type: DELETE_PROVIDER_SUCCESS,\r\n    payload: {\r\n        FETCH_ALL_PROVIDERS_BEGIN\r\n    }\r\n});\r\n\r\nconst deleteProviderFailure = error => ({\r\n    type: DELETE_PROVIDER_FAILURE,\r\n    payload: {\r\n        error\r\n    }\r\n});\r\n\r\nexport function deleteProvider(ids) {\r\n    var url = `${MEDLOCK_API}/admin/provider`;\r\n\r\n    return dispatch => {\r\n        dispatch(deleteProviderBegin());\r\n        fetchAMT()\r\n            .then(res => {\r\n                const AMT = res.data.access_token;\r\n                return axios.delete(url, {\r\n                    data: {\r\n                        AMT, \r\n                        ids,\r\n                    }\r\n                })\r\n                    .then(res => dispatch(deleteProviderSuccess(res.data)))\r\n                    .catch(err => dispatch(deleteProviderFailure(err)));\r\n            });\r\n    }\r\n\r\n}   \r\n\r\n","import React, { Component } from 'react';\r\nimport UserList from '../../../users/UserList';\r\nimport { Button } from 'reactstrap';\r\nimport '../../../../css/Admin.css';\r\n\r\n\r\nexport default class PatientSection extends Component {\r\n    viewUser = (user) => {\r\n        console.log(`Mock Viewing: ${user.personalData.name}`);\r\n    }\r\n    \r\n    deleteUser = (id) => {\r\n        console.log(`Mock Deleting: user(id=${id})`);\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div className=\"PatientSection\">\r\n                <div className=\"PatientSection-header\">\r\n                    <h3 className=\"header\">Patients</h3>\r\n                </div>\r\n                <div className=\"ProviderSection-content\">\r\n                    <div className=\"patientList-container\">\r\n                        <UserList \r\n                            users={this.props.patients}\r\n                            viewUser={this.viewUser}\r\n                            deleteUser={this.props.deletePatient}\r\n                            deleteAll={this.props.deleteAllPatients}\r\n                            createNew={this.props.createNewPatient}\r\n                        />\r\n                    </div>\r\n                    {/* <div>\r\n                        <Button className=\"red-button\" onClick={this.props.deleteAllPatients}>Delete All</Button>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport UserList from '../../../users/UserList';\r\nimport { Button, Form, FormGroup, Label, Input, Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\r\nimport axios from 'axios';\r\n\r\nexport default class ProviderSection extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            newProviderFormVisible: false,\r\n        };\r\n    }\r\n\r\n    viewProvider = (provider) => {\r\n        console.log(`Mock Viewing: ${provider.personalData.name}`);\r\n    }\r\n\r\n    createNewProviderForm = () => {\r\n        if (this.state.newProviderFormVisible) {\r\n            return (\r\n                <Form>\r\n                    <FormGroup>\r\n                        <Label for=\"newProviderName\" className=\"form-heading\">Name</Label>\r\n                        <Input \r\n                            type=\"text\" \r\n                            name=\"newProviderName\" \r\n                            id=\"newProviderName\"\r\n                            onChange={this.onChange}\r\n                        />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"newProviderEmail\" className=\"form-heading\">Email</Label>\r\n                        <Input \r\n                            type=\"text\" \r\n                            name=\"newProviderEmail\" \r\n                            id=\"newProviderEmail\"\r\n                            onChange={this.onChange}\r\n                        />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Button className=\"red-button\" onClick={() => {\r\n                            this.setState({\r\n                                ...this.state,\r\n                                newProviderFormVisible: false,\r\n                            });\r\n                        }}>Cancel</Button>\r\n                        <Button className=\"blue-button\" onClick={() => {\r\n                            this.setState({\r\n                                ...this.state,\r\n                                newProviderFormVisible: false,\r\n                            });\r\n                            this.props.createNewProvider(this.state.newProviderName, this.state.newProviderEmail);\r\n                        }}>Create</Button>\r\n                    </FormGroup>\r\n                </Form>\r\n            );\r\n        } else {\r\n            return (\r\n                <Button className=\"blue-button\" onClick={() => {\r\n                    this.setState({\r\n                        ...this.state,\r\n                        newProviderFormVisible: true\r\n                    })\r\n                }}>Create New Provider</Button>\r\n            )\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        this.setState({\r\n            ...this.state,\r\n            [e.target.name]: e.target.value\r\n        });\r\n        console.log(this.state);\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div className=\"ProviderSection\">\r\n                <div className=\"ProviderSection-header\">\r\n                    <h3 className=\"header\">Providers</h3>\r\n                </div>\r\n                <div className=\"ProviderSection-content\">\r\n                    <div className=\"providerList-container\">\r\n                        <UserList \r\n                            users={this.props.providers}\r\n                            viewUser={this.viewProvider}\r\n                            deleteUser={this.props.deleteProvider}\r\n                            deleteAll={this.props.deleteAllProviders}\r\n                            createNew={this.props.createNewProvider}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        {this.createNewProviderForm()}\r\n                    </div>\r\n                    {/* <div>\r\n                        <Button align=\"center\" className=\"red-button\" onClick={this.props.deleteAllProviders}>Delete All</Button>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react'; \r\nimport { connect } from 'react-redux'; \r\n\r\nimport { fetchAMT } from '../../auth/AuthManagement'; \r\nimport { auth0Registration, assignRoles } from '../../actions/authActions'; \r\nimport { createProviderProfile, fetchAllProviders, deleteProvider } from '../../actions/providerActions'; \r\nimport { fetchAllPatients, deletePatient } from '../../actions/patientActions';\r\nimport { MEDLOCK_API } from '../../config/servers';\r\n\r\nimport PatientSection from './sections/patients/PatientSection';\r\n\r\nimport axios from 'axios';\r\nimport ProviderSection from './sections/providers/ProviderSection';\r\nimport PropTypes from 'prop-types';\r\nimport '../../css/Admin.css';\r\n\r\nclass Admin extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchAllPatients();\r\n        this.props.fetchAllProviders();\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            ...this.state,\r\n            [e.target.name]: e.target.value \r\n        });\r\n        console.log(this.state);\r\n    }\r\n\r\n    createNewPatient = (name, email) => {\r\n        console.log(\"Mock: creating new patient.\");\r\n    }\r\n\r\n    createNewProvider = (name, email) => {\r\n        fetchAMT() \r\n            .then(res => {\r\n                console.log(res); \r\n                const AMT = res.data.access_token; \r\n                \r\n                const password = Math.random().toString(36).slice(-12); \r\n\r\n                const newProvider = {\r\n                    \"name\": name, \r\n                    \"email\": email,\r\n                    \"password\": password,\r\n                    \"connection\": \"Username-Password-Authentication\"\r\n                };\r\n\r\n                // Create New Provider in Auth0 \r\n                this.props.auth0Registration(newProvider, AMT) \r\n                    .then(() => {\r\n                        // Send Temporary Password \r\n                        this.newProviderEmail(newProvider); \r\n\r\n                        // Create New Provider in MongoDB \r\n                        const user_id = this.props.userProfile.user_id; \r\n                        this.props.createProviderProfile({\r\n                            _id: user_id.substring(6), \r\n                            personalData: {\r\n                                name, \r\n                                email,\r\n                            }\r\n                        // Eventually create administrator roles and query user roles. \r\n                        }, \"Admin\"); \r\n\r\n                        // Assign Provider Role to New User \r\n                        this.props.assignRoles(user_id, AMT, \"Provider\"); \r\n\r\n\r\n                    }) \r\n                    .catch(error => console.log(error)); \r\n            }) \r\n            .catch(error => console.log(error)); \r\n    }\r\n\r\n    newProviderEmail = (newProvider) => {\r\n        var url = `${MEDLOCK_API}/email`;\r\n        axios.post(url, newProvider); \r\n    }\r\n\r\n    deleteAllProviders = () => {\r\n\r\n        // var url = `${MEDLOCK_API}/admin/provider`;\r\n        const ids = this.props.providers.map(provider => provider._id);\r\n        this.props.deleteProvider(ids);\r\n        // console.log(ids);\r\n        // fetchAMT()\r\n        //     .then(res => {\r\n        //         const AMT = res.data.access_token;\r\n        //         axios.delete(url, {\r\n        //             data: {\r\n        //                 AMT,\r\n        //                 ids, \r\n        //             }\r\n        //         })\r\n        //         .then(console.log(\"All Providers Deleted Successfully\"))\r\n        //         .catch(err => console.log(err));\r\n        //     });\r\n    }\r\n\r\n    deletePatient = (patientId) => {\r\n        this.props.deletePatient([patientId]);\r\n        // console.log(patientId);\r\n        // var url = `${MEDLOCK_API}/admin/patient`;\r\n        // var ids = [patientId]\r\n        // fetchAMT()\r\n        //     .then(res => {\r\n        //         const AMT = res.data.access_token; \r\n        //         axios.delete(url, {\r\n        //             data: {\r\n        //                 AMT,\r\n        //                 ids,\r\n        //             }\r\n        //         })\r\n        //             .then((err) => {\r\n        //                 if(err) {console.log(err); throw Error(err)};\r\n        //                 alert(`Patient ${patientId} deleted successfully`);\r\n        //             })\r\n        //             .catch(err => alert(`Error On Delete: ${err}`));\r\n        //     });            \r\n    }\r\n\r\n    deleteProvider = (providerId) => {\r\n        this.props.deleteProvider([providerId]);\r\n        // console.log(providerId);\r\n        // var url = `${MEDLOCK_API}/admin/provider`;\r\n        // var ids = [providerId]\r\n        // console.log(ids);\r\n        // fetchAMT()\r\n        //     .then(res => {\r\n        //         const AMT = res.data.access_token;\r\n        //         axios.delete(url, {\r\n        //             data: {\r\n        //                 AMT,\r\n        //                 ids,\r\n        //             }\r\n        //         })\r\n        //             .then(alert(`Provider(id=${providerId}) deleted successfully`))\r\n        //             .catch(err => alert(err));\r\n        //     });\r\n    }\r\n\r\n    deleteAllPatients = () => {\r\n        // var url = `${MEDLOCK_API}/admin/patient`;\r\n        const ids = this.props.patients.map(patient => patient._id);\r\n        this.props.deletePatient(ids);\r\n        // fetchAMT()\r\n        //     .then(res => {\r\n        //         const AMT = res.data.access_token;\r\n        //         axios.delete(url, {\r\n        //             data: {\r\n        //                 AMT,\r\n        //                 ids,     \r\n        //             }\r\n        //         })\r\n        //             .then(alert(`All patients deleted successfully`))\r\n        //             .catch(err => alert(`Error On Delete: ${err}`));\r\n        //     });\r\n            \r\n    }\r\n\r\n    render() {\r\n        console.log(this.props);\r\n        const { patients, \r\n                patientsFetching, \r\n                patientsFetched, \r\n                fetchPatientsError,\r\n                providers,\r\n                providersFetching,\r\n                providersFetched,\r\n                fetchProvidersError\r\n            } = this.props;\r\n\r\n        \r\n        if (fetchProvidersError || fetchPatientsError) {\r\n            return (\r\n                <div>\r\n                    PROVIDER: ${fetchProvidersError}\r\n                    PATIENT: ${fetchPatientsError}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (providersFetching || patientsFetching) {\r\n            return (\r\n                <div> Loading . . .</div>\r\n            );\r\n        } \r\n\r\n            return (\r\n                <div>\r\n                    <div className=\"Admin-header\">\r\n                        <h1 className=\"header\">MedLock Admin</h1>\r\n                    </div>\r\n                    <div className=\"Admin-content\">\r\n                            <PatientSection \r\n                                patients={patients}\r\n                                createNewPatient={this.createNewPatient}\r\n                                deletePatient={this.deletePatient}\r\n                                deleteAllPatients={this.deleteAllPatients}\r\n                            />\r\n                            <ProviderSection \r\n                                providers={providers}\r\n                                createNewProvider={this.createNewProvider}\r\n                                deleteProvider={this.deleteProvider}\r\n                                deleteAllProviders={this.deleteAllProviders} \r\n                            />\r\n                    </div>\r\n                </div>\r\n            );\r\n        \r\n    }\r\n} \r\n\r\nAdmin.propTypes = {\r\n    userProfile: PropTypes.object.isRequired,\r\n\r\n    fetchAllPatients: PropTypes.func.isRequired,\r\n    patients: PropTypes.array.isRequired,\r\n    patientsFetching: PropTypes.bool.isRequired,\r\n    patientsFetched: PropTypes.bool.isRequired,\r\n    fetchPatientsError: PropTypes.object,\r\n\r\n    fetchAllProviders: PropTypes.func.isRequired,\r\n    providers: PropTypes.array.isRequired,\r\n    providersFetching: PropTypes.bool.isRequired,\r\n    providersFetched: PropTypes.bool.isRequired,\r\n    fetchProvidersError: PropTypes.object,\r\n\r\n    deleteProvider: PropTypes.func.isRequired,\r\n    deletedProviders: PropTypes.array.isRequired,\r\n\r\n    deletePatient: PropTypes.func.isRequired,\r\n    deletedPatients: PropTypes.array.isRequired,\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    userProfile: state.authState.userProfile,\r\n\r\n    patients: state.patientState.patients,\r\n    patientsFetching: state.patientState.patientsFetching,\r\n    patientsFetched: state.patientState.patientsFetched,\r\n    fetchPatientsError: state.patientState.fetchPatientsError,\r\n\r\n    providers: state.providerState.providers,\r\n    providersFetching: state.providerState.providersFetching,\r\n    providersFetched: state.providerState.providersFetched,\r\n    fetchProvidersError: state.providerState.providerError, \r\n\r\n    deletedProviders: state.providerState.deletedProviders,\r\n    deletedPatients: state.patientState.deletedPatients\r\n});\r\n\r\nexport default connect(mapStateToProps, { \r\n    auth0Registration, \r\n    createProviderProfile, \r\n    assignRoles, \r\n    fetchAllPatients, \r\n    fetchAllProviders,\r\n    deleteProvider,\r\n    deletePatient,\r\n})(Admin); ","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Dashboard from './components/dashboard/Dashboard'; \r\nimport { Route } from 'react-router-dom'; \r\nimport Callback from './components/Callback';\r\nimport Home from './components/home/Home';\r\nimport auth0client from './auth/Auth';\r\nimport SecuredRoute from './components/SecuredRoute';\r\nimport Login from './components/login/Login';\r\nimport Admin from './components/administration/Admin'; \r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst handleAuthentication = (nextState, replace) => {\r\n    if (/access_token|id_token|error/.test(nextState.location.hash)) {\r\n        console.log(nextState)\r\n        console.log(nextState.location.hash)\r\n        console.log(/access_token|id_token|error/.test(nextState.location.hash))\r\n        auth0client.handleAuthentication();\r\n    }\r\n}\r\n\r\nconst makeMainRoutes = () => {\r\n  return (\r\n    <div>\r\n      <Route exact path=\"/\" component={Login} />\r\n      <Route exact path=\"/admin\" component={Admin} />\r\n      <SecuredRoute path=\"/home\" component={Home} />\r\n      <SecuredRoute path=\"/dashboard\" component={Dashboard} />\r\n      <Route path=\"/callback\" render={(props) =>{\r\n          handleAuthentication(props);\r\n          return <Callback {...props} />\r\n      }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport class App extends Component {\r\n\r\n  render() {\r\n    return ( \r\n      <div className=\"App\">\r\n          { makeMainRoutes() } \r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { \r\n    LOAD_PROFILE_BEGIN,\r\n    LOAD_PROFILE_SUCCESS,\r\n    LOAD_PROFILE_FAILURE,\r\n    SAVE_PROFILE_BEGIN,\r\n    SAVE_PROFILE_SUCCESS,\r\n    SAVE_PROFILE_FAILURE,\r\n    EDIT_PROFILE,\r\n    ADD_PROFILE_MODULE_BEGIN,\r\n    ADD_PROFILE_MODULE_SUCCESS,\r\n    ADD_PROFILE_MODULE_FAILURE,\r\n    ADD_DISPENSER_CODE_BEGIN, \r\n    ADD_DISPENSER_CODE_SUCCESS, \r\n    ADD_DISPENSER_CODE_FAILURE\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n    profile: null,\r\n    editable: false,\r\n    profileLoading: false,\r\n    profileLoaded: false,\r\n    profileCreated: false,\r\n    profileCreating: false,\r\n    profileCreateError: null, \r\n    profileSaving: false, \r\n    addingNewProfileModule: false,\r\n    profileError: null,\r\n    profileModules: [], \r\n    code: null, \r\n    codeAdding: false, \r\n    codeAddedError: null \r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch (action.type) {\r\n        case LOAD_PROFILE_BEGIN:\r\n            return {\r\n                ...state,\r\n                profileLoading: true\r\n            };\r\n        case LOAD_PROFILE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profile: action.payload.profile\r\n            };\r\n        case LOAD_PROFILE_FAILURE:\r\n            return {\r\n                ...state,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileError: action.payload.error\r\n            };\r\n        case EDIT_PROFILE: \r\n            return {\r\n                ...state,\r\n                editable: true,\r\n            };\r\n        case SAVE_PROFILE_BEGIN:\r\n            return {\r\n                ...state,\r\n                editable: false,\r\n                profileSaving: true, \r\n                profileError: null\r\n            };\r\n        case SAVE_PROFILE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                profileSaving: false,\r\n                profile: {\r\n                    personalData: action.payload.updatedPersonalData\r\n                }\r\n            };\r\n        case SAVE_PROFILE_FAILURE:\r\n            return {\r\n                ...state,\r\n                profileSaving: false,\r\n                error: action.payload.error,\r\n            };\r\n        case ADD_PROFILE_MODULE_BEGIN:\r\n            return {\r\n                ...state,\r\n                editable: false,\r\n                addingNewProfileModule: true,\r\n            };\r\n        case ADD_PROFILE_MODULE_SUCCESS: \r\n            return {\r\n                ...state,\r\n                addingNewProfileModule: false,\r\n                profileModule: action.payload.newProfileModule\r\n            };\r\n        case ADD_PROFILE_MODULE_FAILURE: \r\n            return {\r\n                ...state,\r\n                addingNewProfileModule: false,\r\n                profileError: action.payload.error\r\n            };\r\n        case ADD_DISPENSER_CODE_BEGIN:\r\n            console.log(\"Begin adding code. \"); \r\n            return {\r\n                ...state,\r\n                codeAdding: true,\r\n            };\r\n        case ADD_DISPENSER_CODE_SUCCESS: \r\n            console.log(\"Success adding code. \"); \r\n            return {\r\n                ...state,\r\n                codeAdding: false,\r\n                code: action.payload.code\r\n            };\r\n        case ADD_DISPENSER_CODE_FAILURE: \r\n            console.log(\"Failure adding code. \"); \r\n            return {\r\n                ...state,\r\n                codeAdding: false,\r\n                codeAddedError: action.payload.error\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { \r\n    SUBMIT_SURVEY_BEGIN,\r\n    SUBMIT_SURVEY_SUCCESS,\r\n    SUBMIT_SURVEY_FAILURE, \r\n    FETCH_PDISURVEYS_BEGIN,\r\n    FETCH_PDISURVEYS_SUCCESS,\r\n    FETCH_PDISURVEYS_FAILURE,\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n    surveyResponse: null,\r\n    responses: [],\r\n    surveysLoading: false, \r\n    surveysLoaded: false,\r\n    loading: false,\r\n    error: null \r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch (action.type) {\r\n        case SUBMIT_SURVEY_BEGIN: \r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case SUBMIT_SURVEY_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                surveyResponse: action.payload.survey\r\n            };\r\n        case SUBMIT_SURVEY_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload.error\r\n            }\r\n        case FETCH_PDISURVEYS_BEGIN:\r\n            return {\r\n                ...state,\r\n                surveysLoading: true,\r\n                error: null\r\n            };\r\n        case FETCH_PDISURVEYS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                surveysLoading: false,\r\n                surveysLoaded: true,\r\n                responses: action.payload.surveys\r\n            };\r\n    \r\n        case FETCH_PDISURVEYS_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload.error,\r\n                responses: []\r\n            }; \r\n        default:\r\n            return state;\r\n    }; \r\n}\r\n\r\n\r\n","import { FETCH_DISPENSER_BEGIN, FETCH_DISPENSER_SUCCESS, FETCH_DISPENSER_FAILURE } from '../actions/types';\r\n\r\nconst initialState = {\r\n    dispenser: {},\r\n    dispenses: [],\r\n    loading: false, \r\n    dispenserLoading: false,\r\n    dispenserLoaded: false,\r\n    error: null \r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch (action.type) {\r\n        case FETCH_DISPENSER_BEGIN:\r\n            return {\r\n                ...state,\r\n                dispenserLoading: true,\r\n                error: null\r\n            };\r\n        case FETCH_DISPENSER_SUCCESS:\r\n            return {\r\n                ...state,\r\n                dispenserLoading: false,\r\n                dispenserLoaded: true,\r\n                dispenser: action.payload.dispenser\r\n            };\r\n    \r\n        case FETCH_DISPENSER_FAILURE:\r\n            return {\r\n                ...state,\r\n                dispenserLoading: false,\r\n                dispenserLoaded: true,\r\n                error: action.payload.error,\r\n            }; \r\n        default:\r\n            return state;\r\n    }; \r\n}\r\n\r\n\r\n","import {\r\n    FETCH_ROLES_BEGIN, \r\n    FETCH_ROLES_SUCCESS, \r\n    FETCH_ROLES_FAILURE, \r\n    AUTH0_REGISTRATION_BEGIN, \r\n    AUTH0_REGISTRATION_SUCCESS, \r\n    AUTH0_REGISTRATION_FAILURE \r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n    roles: null, \r\n    rolesLoading: false, \r\n    rolesError: null, \r\n    AMT: null, \r\n    AMTLoading: false, \r\n    AMTError: null, \r\n    userProfile: null, \r\n    userProfileLoading: false, \r\n    userProfileError: null \r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch (action.type) {\r\n        case FETCH_ROLES_BEGIN: \r\n            return {\r\n                ...state, \r\n                rolesLoading: true, \r\n                rolesError: null \r\n            };\r\n        case FETCH_ROLES_SUCCESS: \r\n            return {\r\n                ...state, \r\n                rolesLoading: false, \r\n                roles: action.payload.roles \r\n            };\r\n        case FETCH_ROLES_FAILURE: \r\n            return {\r\n                ...state, \r\n                rolesLoading: false, \r\n                rolesError: action.payload.error, \r\n                roles: {} \r\n            }; \r\n        case AUTH0_REGISTRATION_BEGIN: \r\n            return {\r\n                ...state, \r\n                userProfileLoading: true, \r\n                userProfileError: null \r\n            }; \r\n        case AUTH0_REGISTRATION_SUCCESS: \r\n            return {\r\n                ...state, \r\n                userProfileLoading: false, \r\n                userProfile: action.payload.userProfile \r\n            };\r\n        case AUTH0_REGISTRATION_FAILURE: \r\n            return {\r\n                ...state, \r\n                userProfileLoading: false, \r\n                userProfileError: action.payload.error \r\n            }; \r\n        default:\r\n            return state;\r\n    }\r\n}","import {\r\n    CREATE_PROVIDER_PROFILE_BEGIN,\r\n    CREATE_PROVIDER_PROFILE_SUCCESS,\r\n    CREATE_PROVIDER_PROFILE_FAILURE,\r\n\r\n    FETCH_ALL_PATIENTS_BEGIN,\r\n    FETCH_ALL_PATIENTS_SUCCESS,\r\n    FETCH_ALL_PATIENTS_FAILURE,\r\n    FETCH_ALL_PROVIDERS_BEGIN,\r\n    FETCH_ALL_PROVIDERS_SUCCESS,\r\n    FETCH_ALL_PROVIDERS_FAILURE,\r\n    DELETE_PROVIDER_BEGIN,\r\n    DELETE_PROVIDER_SUCCESS,\r\n    DELETE_PROVIDER_FAILURE,\r\n\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n    provider: null, \r\n    providers: [],\r\n    providerLoading: false,\r\n    providersFetching: false, \r\n    providersFetched: false,\r\n    providerDeleting: false,\r\n    deletedProviders: [],\r\n    providerError: null\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch (action.type) {\r\n        case CREATE_PROVIDER_PROFILE_BEGIN:\r\n            return {\r\n                ...state,\r\n                providerLoading: true, \r\n                providerError: null \r\n            };\r\n        case CREATE_PROVIDER_PROFILE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                providerLoading: false,\r\n                provider: action.payload.provider\r\n            };\r\n        case CREATE_PROVIDER_PROFILE_FAILURE:\r\n            return {\r\n                ...state, \r\n                providerLoading: false,\r\n                providerError: action.payload.error\r\n            };\r\n        case FETCH_ALL_PROVIDERS_BEGIN: \r\n            return {\r\n                ...state,\r\n                providersFetching: true,\r\n            };\r\n        case FETCH_ALL_PROVIDERS_SUCCESS: \r\n            return {\r\n                ...state,\r\n                providersFetching: false,\r\n                providersFetched: true,\r\n                providers: action.payload.providers\r\n            };\r\n        case FETCH_ALL_PROVIDERS_FAILURE:\r\n            return {\r\n                ...state,\r\n                providersFetching: false,\r\n                providersFetched: false,\r\n                providerError: action.payload.error\r\n            };\r\n        case DELETE_PROVIDER_BEGIN: \r\n            return {\r\n                ...state,\r\n                providerDeleting: true\r\n            };\r\n        case DELETE_PROVIDER_SUCCESS:\r\n            return {\r\n                ...state,\r\n                providerDeleting: false,\r\n                deletedProviders: action.payload.providers\r\n            };\r\n        case DELETE_PROVIDER_FAILURE:\r\n            return {\r\n                ...state, \r\n                providerDeleting: false,\r\n                providerError: action.payload.error,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import { \r\n    CREATE_PATIENT_PROFILE_BEGIN,\r\n    CREATE_PATIENT_PROFILE_SUCCESS,\r\n    CREATE_PATIENT_PROFILE_FAILURE, \r\n\r\n    ADD_PATIENT_BEGIN,\r\n    ADD_PATIENT_SUCCESS,\r\n    ADD_PATIENT_FAILURE, \r\n\r\n    FETCH_PATIENTS_BEGIN, \r\n    FETCH_PATIENTS_SUCCESS, \r\n    FETCH_PATIENTS_FAILURE, \r\n\r\n    DELETE_PATIENT_BEGIN,\r\n    DELETE_PATIENT_SUCCESS,\r\n    DELETE_PATIENT_FAILURE,\r\n\r\n    FETCH_ALL_PATIENTS_BEGIN,\r\n    FETCH_ALL_PATIENTS_SUCCESS,\r\n    FETCH_ALL_PATIENTS_FAILURE,\r\n    REMOVE_PATIENT_BEGIN,\r\n    REMOVE_PATIENT_FAILURE,\r\n    REMOVE_PATIENT_SUCCESS,\r\n\r\n} from '../actions/types'; \r\n\r\nconst initialState = {\r\n    patients: [], \r\n    patient: null, \r\n\r\n    patientsFetching: false, \r\n    patientsFetched: false,\r\n    fetchPatientsError: null, \r\n\r\n    patientDeleting: false,\r\n    deletedPatients: null,\r\n    deletePatientError: null,\r\n\r\n    patientRegistering: false, \r\n    createPatientError: null, \r\n    newAddedPatient: null, \r\n    addPatientLoading: false, \r\n    addPatientError: null, \r\n\r\n    patientRemoving: false,\r\n    lastRemovedPatient: null,\r\n    patientRemoveError: null,\r\n} \r\n\r\nexport default function(state = initialState, action) {\r\n    switch (action.type) {\r\n        case CREATE_PATIENT_PROFILE_BEGIN:\r\n            return {\r\n                ...state,\r\n                patientRegistering: true, \r\n                createPatientError: null \r\n            };\r\n        case CREATE_PATIENT_PROFILE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                patientRegistering: false,\r\n                patient: action.payload.patient\r\n            };\r\n        case CREATE_PATIENT_PROFILE_FAILURE:\r\n            return {\r\n                ...state, \r\n                patientRegistering: false,\r\n                createPatientError: action.payload.error\r\n            };\r\n        case ADD_PATIENT_BEGIN:\r\n            return {\r\n                ...state,\r\n                addPatientLoading: true, \r\n                addPatientError: null \r\n            };\r\n        case ADD_PATIENT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                addPatientLoading: false,\r\n                // patients: [...action.payload.patient],\r\n                newAddedPatient: action.payload.patient\r\n            };\r\n        case ADD_PATIENT_FAILURE:\r\n            return {\r\n                ...state, \r\n                addPatientLoading: false,\r\n                addPatientError: action.payload.error\r\n            };\r\n        case FETCH_PATIENTS_BEGIN:\r\n            return {\r\n                ...state,\r\n                patientsFetching: true, \r\n                fetchPatientsError: null \r\n            };\r\n        case FETCH_PATIENTS_SUCCESS: \r\n            return {\r\n                ...state,\r\n                patientsFetching: false,\r\n                patientsFetched: true,\r\n                patients: action.payload.patients\r\n            };\r\n        case FETCH_PATIENTS_FAILURE:\r\n            return {\r\n                ...state, \r\n                patientsFetching: false,\r\n                fetchPatientsError: action.payload.error\r\n            };\r\n        case DELETE_PATIENT_BEGIN: \r\n            return {\r\n                ...state,\r\n                patientDeleting: true,\r\n            };\r\n        case DELETE_PATIENT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                patientDeleting: false,\r\n                deletedPatients: action.payload.patients\r\n            };\r\n        case DELETE_PATIENT_FAILURE:\r\n            return {\r\n                ...state,\r\n                patientDeleting: false,\r\n                deletePatientError: action.payload.error\r\n            };\r\n        case FETCH_ALL_PATIENTS_BEGIN:\r\n            return {\r\n                ...state,\r\n                patientsFetching: true,\r\n            };\r\n        case FETCH_ALL_PATIENTS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                patientsFetching: false,\r\n                patientsFetched: true,\r\n                patients: action.payload.patients\r\n            };\r\n        case FETCH_ALL_PATIENTS_FAILURE:\r\n            return {\r\n                ...state,\r\n                patientsFetching: false,\r\n                patientsFetched: false,\r\n                patients: action.payload.error\r\n            };\r\n        case REMOVE_PATIENT_BEGIN: \r\n            return {\r\n                ...state,\r\n                patientRemoving: true,\r\n            };\r\n        case REMOVE_PATIENT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                patientRemoving: false,\r\n                lastRemovedPatient: action.payload.patient\r\n            };\r\n        case REMOVE_PATIENT_FAILURE: \r\n            return {\r\n                ...state,\r\n                patientRemoving: false,\r\n                patientRemoveError: action.payload.error\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n\r\n","import {\r\n    COLLAPSE_SIDEBAR,\r\n    EXPAND_SIDEBAR,\r\n    SET_SIDEBAR_TOGGLE,\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n    collapsed: false,\r\n    toggle: false,\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch(action.type) {\r\n        case COLLAPSE_SIDEBAR:\r\n            return {\r\n                ...state,\r\n                collapsed: true,\r\n            };\r\n        case EXPAND_SIDEBAR: \r\n            return {\r\n                ...state,\r\n                collapsed: false\r\n            };\r\n        case SET_SIDEBAR_TOGGLE:\r\n            return {\r\n                ...state,\r\n                toggle: !state.toggle\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux';\r\nimport profileReducer from './profileReducer'; \r\nimport surveyReducer from './surveyReducer'; \r\nimport dispenseReducer from './dispenseReducer'; \r\nimport authReducer from './authReducer';\r\nimport providerReducer from './providerReducer'; \r\nimport patientReducer from './patientReducer'; \r\nimport sideBarReducer from './sideBarReducer';\r\n\r\nexport default combineReducers({\r\n    profileState: profileReducer, \r\n    surveyState: surveyReducer, \r\n    dispenseState: dispenseReducer,\r\n    authState: authReducer,\r\n    providerState: providerReducer, \r\n    patientState: patientReducer,\r\n    sideBarState: sideBarReducer \r\n});","import { createStore, applyMiddleware, compose } from 'redux'; \r\nimport { composeWithDevTools } from 'redux-devtools-extension'; \r\nimport thunk from 'redux-thunk';\r\nimport reduxPromise from 'redux-promise-middleware';\r\nimport rootReducer from './reducers/rootReducer';\r\n\r\nconst initialState = {\r\n    user: {\r\n        name: 'John',\r\n        bio: \"Born and raised in Alabama. 40 years old.\"\r\n    },\r\n    editable: false,\r\n    profileModules: [\r\n        {\r\n            question: \"Question\",\r\n            answer: \"Answer\"\r\n\r\n        }\r\n    ]\r\n};\r\n\r\nconst middleware = [thunk, reduxPromise];\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    // compose(\r\n    //     applyMiddleware(...middleware),\r\n    //     window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n    // )\r\n    composeWithDevTools(\r\n        applyMiddleware(...middleware),\r\n    )\r\n);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store'; \r\nimport { Router } from 'react-router-dom';\r\nimport history from './components/nav/history';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Router history={history}>\r\n            <App />\r\n        </Router>\r\n    </Provider>\r\n    , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/round-menu-24px.97217f37.svg\";","module.exports = __webpack_public_path__ + \"static/media/white-logo.39f19165.png\";","module.exports = __webpack_public_path__ + \"static/media/round-timeline-24px.d0a393cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/profile_pic.87fea0b9.jpg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGYmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA4LTA1VDExOjE0OjU4LTA0OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wOC0wNVQxMTozMDozNy0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wOC0wNVQxMTozMDozNy0wNDowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MDk5MDYyYy0yZmZjLTBlNDMtOWM0ZS1jYjJiM2FhMTJjZGYiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozZTJhNjA3Ni0xNWRlLTBmNDMtYmUyZS0zNjEzMjMwZWQzMDgiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjN2E4MDNmOC1lZjliLWFkNDItOWRiMC00MzZhYzc3NzJmZDUiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM3YTgwM2Y4LWVmOWItYWQ0Mi05ZGIwLTQzNmFjNzc3MmZkNSIgc3RFdnQ6d2hlbj0iMjAxOS0wOC0wNVQxMToxNDo1OC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYwOTkwNjJjLTJmZmMtMGU0My05YzRlLWNiMmIzYWExMmNkZiIgc3RFdnQ6d2hlbj0iMjAxOS0wOC0wNVQxMTozMDozNy0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqzfe2cAAAcySURBVHic7Z3PaxNpGMe/ibWVUmyskt+RVltYlgWzUERk1WwPZY9F1oW9rAHPQpXdw8Ieuh4EsWtOi/RUBRv7Q/CgoNBD2tiaphpaEbH5MYnsH7D25KGRnT1kQtPJTDLN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\"","module.exports = __webpack_public_path__ + \"static/media/profile_pic.87fea0b9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/round-email-24px.fced4ad9.svg\";","module.exports = __webpack_public_path__ + \"static/media/round-folder-24px.e371ccf8.svg\";","module.exports = __webpack_public_path__ + \"static/media/round-home-24px.3472f751.svg\";","module.exports = __webpack_public_path__ + \"static/media/round-person-24px.98aed072.svg\";","module.exports = __webpack_public_path__ + \"static/media/round-people-24px.162c3f4c.svg\";"],"sourceRoot":""}